2003-02-22  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: Added Catalan (ca) to ALL_LINGUAS

2003-02-21  James Willcox  <jwillcox@gnome.org>

	* data/starthere/Makefile.am:

	Remove the css file from the build.

2003-02-21  James Willcox  <jwillcox@gnome.org>

	* data/starthere/section.xsl:
	* lib/ephy-start-here.c: (color_to_string), (build_content):

	Make the start-here: page use the theme colors.

2003-02-21  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-editable-toolbar.c:
	(ephy_editable_toolbar_set_group):
	
	Use connect_object so the changed signal is removed
	from closed window.

2003-02-21  Marco Pesenti Gritti  <marco@it.gnome.org>

	* src/toolbar.c: (get_bookmark_action), (toolbar_get_action):

	Dont create duped actions, fix crash on exit

2003-02-21  Takayuki KUSANO  <AE5T-KSN@asahi-net.or.jp>

	* configure.in: added ja.po to ALL_LINGUAS

2003-02-21  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/egg/egg-action.c: (egg_action_remove_proxy):
	* lib/widgets/ephy-editable-toolbar.c: (get_item_widget),
	(connect_item_drag_source), (disconnect_item_drag_source),
	(setup_toolbar), (setup_item), (ensure_toolbar_min_size):
	* lib/widgets/ephy-toolbars-group.c: (toolbars_toolbar_new),
	(toolbars_item_new), (free_toolbar_node), (free_item_node),
	(ephy_toolbars_group_to_string), (ephy_toolbars_group_get_path):
	* lib/widgets/ephy-toolbars-group.h:

	Fix crashes with multiple windows open

2003-02-21 Pekka Lampila <medar@kapina.org>

	* lib/widgets/ephy-toolbars-group.c: (load_defaults),
	(load_toolbar):

	Free xml documents

2003-02-21  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-editable-toolbar.c: (find_action),
	(impl_get_action), (ui_update), (queue_ui_update),
	(drag_data_received_cb), (drag_data_delete_cb), (drag_data_get_cb),
	(connect_item_drag_source), (disconnect_item_drag_source),
	(setup_toolbar), (setup_item), (ensure_toolbar_min_size),
	(do_merge), (ensure_action), (group_changed_cb),
	(ephy_editable_toolbar_set_group),
	(ephy_editable_toolbar_set_merge), (hide_editor),
	(editor_close_cb), (editor_add_toolbar_cb),
	(editor_drag_data_received_cb), (editor_drag_data_delete_cb),
	(setup_editor), (add_to_list), (update_editor_sheet),
	(update_editor_position), (button_press_cb), (show_editor),
	(set_action_sensitive), (ephy_editable_toolbar_edit):
	* lib/widgets/ephy-toolbars-group.c: (ephy_toolbars_group_to_xml),
	(toolbars_group_save), (toolbars_item_new), (free_toolbar_node),
	(free_item_node), (ephy_toolbars_group_add_item),
	(ephy_toolbars_group_add_toolbar), (load_defaults), (load_toolbar),
	(ephy_toolbars_group_to_string),
	(ephy_toolbars_group_remove_toolbar),
	(ephy_toolbars_group_remove_item),
	(ephy_toolbars_group_set_source), (is_item_in_toolbars),
	(ephy_toolbars_group_foreach_available),
	(ephy_toolbars_group_foreach_toolbar),
	(ephy_toolbars_group_foreach_item), (ephy_toolbars_group_get_path):
	* src/toolbar.c: (toolbar_get_action):

	Add lots of debug code to solve these damned crashes.
	Dont create multiple actions for the same bookmark.
	There are two crashes that I can repro now. 1 Adding bookmarks
	with more then one toolbar opened, and then open tbe.
	2 Add multiple "links" to the same bookmark and then close.
	But I'm sure xan can find more ;)

2003-02-21  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-autocompletion-window.c:
	(hack_tree_view_move_selection):

	Fix another warning

2003-02-20  Christophe Fergeau  <teuf@users.sourceforge.net>

	* configure.in: added fr.po to ALL_LINGUAS

2003-02-20  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-editable-toolbar.c: (do_merge), (ensure_action),
	(group_changed_cb):

	Update actions also on other windows

2003-02-20  Xan Lopez  <xan@masilla.org>

	* data/glade/epiphany.glade:
	* src/history-dialog.c: (history_view_selection_changed_cb),
	(history_view_row_activated_cb), (history_dialog_setup_view),
	(history_dialog_set_embedded),
	(history_time_optionmenu_changed_cb),
	(history_go_button_clicked_cb):

	All hail the mighty "Go to" button.

2003-02-20  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-editable-toolbar.c: (drag_data_received_cb):
	* src/toolbar.c: (toolbar_get_action):

	Dont crash when dragging a new bookmark on the toolbar and
	then click cancel.

2003-02-20  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-toolbars-group.c:
	(ephy_toolbars_group_to_string),
	(ephy_toolbars_group_remove_toolbar),
	(ephy_toolbars_group_remove_item), (ephy_toolbars_group_get_path):

	Fix this crazy bug with toolbar buttons doing two actions after
	having edited them.
	Save toolbar editor also after removing items.

2003-02-20  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-location-entry.c:
	(ephy_location_entry_list_event_after_cb),
	(ephy_location_entry_editable_changed_cb):

	Activate the url when clicking on it from the combo dropdown.
	Based on galeon patch.

2003-02-20  Marco Pesenti Gritti  <marco@it.gnome.org>

	* Makefile.am:

	add a COPYING.README for GPL

2003-02-19  James Willcox  <jwillcox@gnome.org>

	* COPYING:  Added a note about data/art/loading.gif

2003-02-19  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-autocompletion-window.c:
	(ephy_autocompletion_window_init_widgets),
	(hack_tree_view_move_selection):

	Avoid warnings when there is no match

2003-02-19  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/ui/epiphany-ui.xml.in:
	* src/ephy-tab.c: (ephy_tab_show_embed_popup):
	* src/ephy-window.c:
	* src/popup-commands.c:
	* src/window-commands.c:

	Dont have a separate context menu for copy, just
	put it inside the document one

2003-02-19  Dave Bordoley <bordoley@msu.edu>

	* data/ui/epiphany-bookmark-editor-ui.xml.in
	* src/bookmarks/ephy-bookmarks-editor.c
	Fix up the context menu to be more like other ephy
	context menus, added mneumonics.

2003-02-18  Abel Cheung  <maddog@linux.org.hk>

	* configure.in: Added "zh_TW" (traditional Chinese) to ALL_LINGUAS.

2003-02-16  Dave Bordoley <bordoley@msu.edu>

	* src/ephy-window.c
	Fix mneumonic collision between back and bookmarks.

2003-02-16  Dave Bordoley <bordoley@msu.edu>

	* data/ui/epiphany-toolbar.xml.in
	* data/ui/epiphany-ui.xml.in
	* src/ephy-window.c
	* src/popup-commands.c
	* src/popup-commands.h
	* src/window-commands.c
	* src/window-commands.h
	s/browser/window as per conversation with seth...

2003-02-15  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/mozilla/EventContext.cpp:
	
	fix casting on big-endian, from galeon.

2003-02-15  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/ui/epiphany-ui.xml.in:
	* src/ephy-tab.c: (ephy_tab_show_embed_popup):

	Implement a selected text context menu.

2003-02-15  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/find-dialog.c: (find_get_info), (impl_show),
	(find_dialog_go_prev):

	Port some galeon fixes

2003-02-15  Dave Bordoley <bordoley@msu.edu>

	* src/ephy-window.c:
	* src/window-commands.c:
	* src/window-commands.h:
	* data/ui/epiphany-ui.xml.in:

	Added Help->Contents
	Move reload and stop to bottom of view menu
	Fix mneumonic collision in the go menu

2003-02-14  James Willcox  <jwillcox@gnome.org>

	* data/art/Makefile.am:
	* data/ui/Makefile.am:
	* lib/widgets/ephy-notebook.c: (ephy_notebook_init),
	(ephy_notebook_set_page_status), (tab_build_label):
	* src/bookmarks/ephy-bookmarks-editor.c:
	(popup_cmd_open_bookmarks_in_tabs),
	(popup_cmd_open_bookmarks_in_browser),
	(popup_cmd_remove_bookmarks), (ephy_bookmarks_editor_finalize),
	(ephy_bookmarks_editor_show_popup_cb),
	(ephy_bookmarks_editor_construct):

	Add tab load notification (a little spinning icon), and a context
	menu for the bookmarks editor.

2003-02-14  Dave Bordoley <bordoley@msu.edu>

	* data/ui/epiphany-toolbar.xml.in
	s/FileAddBookmark/FileBookmarkPage so that
	the toolbar editor doesn't crash.

2003-02-13  Dave Bordoley <bordoley@msu.edu>

	* data/ui/epiphany-ui.xml.in
	Added some separators.
	Changed "bookmark" verbs and menu names to reflect changes
	in src/ephy-window.c	

	* src/ephy-window.c
	Added a bunch of mneumonics to context menu entries
	s/Add Bookmark.../Bookmark Page... for pages.
	s/Add Bookmark.../Bookmark Link... for links.
	Changed callbacks in  ephy_menu_entries[] and ephy_popups_entries
	to reflect changes in src/window-commands.(ch) and src/pop-commands.(ch).

	* src/popup-commands.c
	* src/popup-commands.h
	s/popup_cmd_link_in_new_window/popup_cmd_link_in_new_browser
	s/popup_cmd_image_in_new_window/popup_cmd_image_in_new_browser
	s/popup_cmd_add_link_bookmark/void popup_cmd_bookmark_link
	s/void popup_cmd_frame_in_new_window/void popup_cmd_frame_in_new_browser

	* src/window-commands.c
	* src/window-commands.h
	s/window_cmd_file_new_window/window_cmd_file_new_browser
	s/window_cmd_file_add_bookmark/window_cmd_file_bookmark_page

	* lib/ephy-stock-icons.h
	Fixed #endif comment s/RB/EPHY

2003-02-13  Lee Willis  <lwillis@plus.net>

	* src/session.c: Fix session saving

2003-02-13  Dave Bordoley <bordoley@msu.edu>

	* src/ephy-window.c
	Remove ctrl+f keybinding for the pdm. Fixes bug 105939.

2003-02-13  Xan Lopez  <xan@masilla.org>

	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_node_selected_cb),
	(keyword_node_selected_cb), (ephy_bookmarks_editor_construct):

	Make "Go to" button insensitive when no bookmark is selected.

2003-02-12  James Willcox  <jwillcox@gnome.org>

	* src/bookmarks/ephy-bookmark-action.c: (entry_activated_cb):
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_solve_smart_url):

	Fix a heap corruption bug that was causing bad stuff when smart
	bookmarks were used from the toolbar.  Fixes #105180

2003-02-12  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-ellipsizing-label.c: (ellipsize_string):
	* lib/widgets/ephy-toolbars-group.c:
	(ephy_toolbars_group_to_string):

	Use g_string_free in the correct way

2003-02-12  Marco Pesenti Gritti  <marco@it.gnome.org>

	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_dispose),
	(ephy_bookmarks_editor_node_selected_cb),
	(ephy_bookmarks_editor_go_to_location),
	(ephy_bookmarks_editor_construct):

	Fix default size, remove some unnecessary spaces

2003-02-12  Xan Lopez  <xan@masilla.org>

	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_node_selected_cb),
	(ephy_bookmarks_editor_go_to_location),
	(ephy_bookmarks_editor_response_cb),
	(ephy_bookmarks_editor_construct):

	Add "Go to" button to the BE.

2003-02-12  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/ui/nautilus-epiphany-view.xml.in:

	Fix capitalization

2003-02-12  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/Makefile.am:
	* lib/widgets/ephy-editable-toolbar.c:
	(ephy_editable_toolbar_get_type), (drag_data_received_cb),
	(drag_data_delete_cb), (connect_item_drag_source),
	(disconnect_item_drag_source), (setup_toolbar), (setup_item),
	(ensure_toolbar_min_size), (do_merge), (group_changed_cb),
	(ensure_action), (ephy_editable_toolbar_set_group),
	(ephy_editable_toolbar_set_merge),
	(ephy_editable_toolbar_set_property),
	(ephy_editable_toolbar_get_property),
	(ephy_editable_toolbar_class_init), (ephy_editable_toolbar_init),
	(ephy_editable_toolbar_finalize), (editor_close_cb),
	(editor_add_toolbar_cb), (add_to_list), (update_editor_sheet),
	(update_editor_position), (set_action_sensitive),
	(ephy_editable_toolbar_edit):
	* lib/widgets/ephy-toolbars-group.c: (toolbars_group_save),
	(add_action), (ephy_toolbars_group_add_item), (parse_item_list),
	(ephy_toolbars_group_add_toolbar), (load_defaults), (load_toolbar),
	(ephy_toolbars_group_to_string), (ephy_toolbars_group_class_init),
	(ephy_toolbars_group_init), (ephy_toolbars_group_finalize),
	(ephy_toolbars_group_remove_toolbar),
	(ephy_toolbars_group_remove_item),
	(ephy_toolbars_group_set_source), (is_item_in_toolbars),
	(ephy_toolbars_group_foreach_available),
	(ephy_toolbars_group_foreach_toolbar),
	(ephy_toolbars_group_foreach_item), (ephy_toolbars_group_get_path):
	* lib/widgets/ephy-toolbars-group.h:
	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_node_selected_cb),
	(ephy_bookmarks_editor_construct):
	* src/bookmarks/ephy-bookmarks.c: (add_to_favorites),
	(history_site_visited_cb), (bookmarks_changed_cb),
	(bookmarks_removed_cb), (ephy_bookmarks_init),
	(ephy_bookmarks_finalize), (ephy_bookmarks_get_bookmark_id),
	(ephy_bookmarks_set_icon):
	* src/ephy-window.c:
	* src/toolbar.c: (toolbar_get_action), (toolbar_init):

	Make EditToolbar use the new data stuff, still need love.
	Fix bookmarks to never use location as an id, because now
	it's editable.

2003-02-10  James Willcox  <jwillcox@gnome.org>

	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_dispose):

	Make the bookmarks editor properly select the "All" keyword if
	it was the last keyword selected.

2003-02-10  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-toolbars-group.c:
	(ephy_toolbars_group_get_type), (ephy_toolbars_group_to_xml),
	(toolbars_group_save), (toolbars_toolbar_new), (toolbars_item_new),
	(free_toolbar_node), (free_item_node), (add_action),
	(ephy_toolbars_group_add_item), (parse_item_list), (add_toolbar),
	(ephy_toolbars_group_add_toolbar), (parse_toolbars),
	(load_defaults), (load_toolbar), (ephy_toolbars_group_to_string),
	(ephy_toolbars_group_class_init), (ephy_toolbars_group_init),
	(ephy_toolbars_group_finalize), (ephy_toolbars_group_new),
	(ephy_toolbars_group_set_source),
	(ephy_toolbars_group_foreach_available),
	(ephy_toolbars_group_foreach_toolbar),
	(ephy_toolbars_group_foreach_item):
	* lib/widgets/ephy-toolbars-group.h:

	Split data out of EditableToolbar, still unused

2003-02-10  Fatih Demir <kabalak@gtranslator.org>

	* configure.in: Added "tr" (Turkish) to the languages' list.

2003-02-09  Xan Lopez  <xan@masilla.org>

	* src/bookmarks/ephy-bookmarks-editor.c:
	* src/bookmarks/ephy-tree-model-node.c
	* src/bookmarks/ephy-tree-model-node.h

	Remove Location field from BE bookmarks view, add a location
	entry instead.

2003-02-09  Marco Pesenti Gritti  <marco@it.gnome.org>

	* src/ephy-nautilus-view.c: (ephy_nautilus_view_instance_init),
	(gnv_bonobo_control_activate_cb):

	Fix context menus

2003-02-09  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/ui/epiphany-ui.xml.in:
	* src/ephy-window.c:
	* src/window-commands.c: (window_cmd_file_close_browser):
	* src/window-commands.h:

	Have just one Close menu item and make it behave like
	other gnome apps.

2003-02-09  Marco Pesenti Gritti  <marco@it.gnome.org>

	* acconfig.h:
	* configure.in:
	* data/GNOME_Epiphany_NautilusView.server.in:
	* src/ephy-nautilus-view.c: (ephy_nautilus_view_instance_init):
	* src/ephy-shell.c:

	Make nautilus view actually work

2003-02-08  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-location-entry.c:
	(ephy_location_entry_autocompletion_sources_changed_cb):

	Some more gtk_timeout_add.

2003-02-08  Christian Meyer  <chrisime@gnome.org>

	* lib/egg/egg-accel-dialog.c:
	* lib/egg/egg-action.c:
	* lib/egg/egg-menu-merge.c:
	* lib/egg/egg-radio-action.c:
	* lib/egg/egg-toggle-action.c:
	* lib/egg/eggtoolbar.c:
	* lib/egg/eggtoolbutton.c:
	* lib/egg/eggtoolitem.c:
	* lib/widgets/ephy-ellipsizing-label.h:
	* lib/widgets/ephy-spinner.h:
	* src/ephy-favicon-action.c:
	* src/ephy-location-action.c:
	* src/ephy-navigation-action.c:
	* src/ephy-spinner-action.c:
	* src/bookmarks/ephy-bookmark-action.c:

	The same no-brainer as in nautilus. Changed GtkType to Gtype.

2003-02-08  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-location-entry.c:
	(ephy_location_entry_key_press_event_cb):
	* lib/widgets/ephy-spinner.c: (ephy_spinner_start),
	(ephy_spinner_remove_update_callback):

	Remove gtk_timeout_x calls. Hope I got all of them.

2003-02-08  Xan Lopez  <xan@masilla.org>

	* src/ephy-shell.c:

	Error handling in Mozilla bookmarks import.

2003-02-08  Xan Lopez  <xan@masilla.org>

	* embed/mozilla/StartHereProtocolHandler.cpp:

	Fix mozilla bookmarks import (no, really).

2003-02-08  Christian Neumair  <chris@gnome-de.org>

	* data/starthere/index.xml.in: Don't mark the bookmarks-import
	paragraph for translation as it just contains a tag.

2003-02-08  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/starthere/index.xml.in:

	Fix some i18n problems

	* src/ephy-spinner-action.c: (item_parent_set_cb), (connect_proxy):

	Use connect object to avoid signals on dead widgets.

2003-02-08  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/ui/epiphany-toolbar.xml.in:
	* lib/widgets/ephy-editable-toolbar.c: (add_action):
	* src/ephy-window.c:
	* src/window-commands.c: (window_cmd_load_location):
	* src/window-commands.h:

	Add a go button to the toolbar editor. The icon is duped
	with default favicon. Would be nice to find something better
	for one of them (I'm not sure if the concept of jump to is good
	for favicon actually).

	Rename FileNewWindow to FileNewBrowser also in toolbar configuration
	file.

2003-02-08  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/egg/eggtoolbar.c: (egg_toolbar_init):
	* src/session.c: (crashed_resume_dialog):

	Better toolbar appeareance. More clear
	buttons labels on resume dialog.

2003-02-07  James Willcox  <jwillcox@gnome.org>

	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_dispose):

	Make the bookmarks editor not crash-on-close if no keyword is selected.

2003-02-07  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/egg/eggtoolbar.c: (egg_toolbar_init):
	* lib/widgets/ephy-spinner.c: (ephy_spinner_expose),
	(ephy_spinner_size_request):

	Spinner dont overlap toolbar shadow

2003-02-06  David Bordoley <bordoley@msu.edu>

	* src/ephy-window.c:
	* data/ui/epiphany-ui.xml:
	s/window/browser. Fixed some tooltips. 
	Change keybindings for close window to ctrl+w,
	and close tab to shift+ctrl+w (although i'm open
	to considering other alternatives).	

2003-02-07  Xan Lopez  <xan@masilla.org>

	* lib/widgets/ephy-spinner.c:
	* src/ephy-encoding-menu.c:

	Fix two memleaks (I hope).

2003-02-06  James Willcox  <jwillcox@gnome.org>

	* data/epiphany.schemas.in:
	* lib/ephy-prefs.h:
	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_class_init),
	(ephy_bookmarks_editor_dispose), (ephy_bookmarks_editor_construct):
	* src/bookmarks/ephy-node-view.c: (ephy_node_view_select_node):
	* src/ephy-main.c: (ephy_main_start):

	Make the bookmarks editor remember the last selected keyword, and
	make startup-notification not hang when using the existing instance.

2003-02-06  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-spinner.c: (ephy_spinner_expose),
	(ephy_spinner_class_init):
	* src/ephy-spinner-action.c: (create_tool_item),
	(toolbar_style_sync), (item_parent_set_cb), (connect_proxy):

	Do not use a button for spinner.
	Correctly update spinner size for toolbar style.

2003-02-06  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-location-entry.c:
	(ephy_location_entry_clear_history):
	* lib/widgets/ephy-location-entry.h:
	* src/history-dialog.c: (history_clear_button_clicked_cb):
	* src/toolbar.c: (toolbar_clear_location_history):
	* src/toolbar.h:

	Clear also location history when clearing history.
	Doesnt update immediately, gtk/gnome bug, will submit
	patches.

2003-02-05  James Willcox  <jwillcox@gnome.org>

	* src/bookmarks/ephy-bookmarks-import.c: (xbel_parse_folder),
	(xbel_parse_bookmarks):

	Make importing actually work properly. *cough*

2003-02-05  James Willcox  <jwillcox@gnome.org>

	* data/starthere/section.xsl:
	* embed/mozilla/StartHereProtocolHandler.cpp:
	* lib/ephy-start-here.c: (galeon_bookmarks), (attach_content):
	* src/bookmarks/ephy-bookmarks-import.c:
	(xbel_parse_single_bookmark), (xbel_parse_folder),
	(xbel_parse_bookmarks), (ephy_bookmarks_import_mozilla),
	(ephy_bookmarks_import_xbel):
	* src/bookmarks/ephy-bookmarks-import.h:
	* src/ephy-shell.c: (ephy_shell_command_cb):

	Added the ability to import galeon and konqueror bookmarks.

2003-02-05  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/mozilla/PromptService.cpp:

	Fix #105184

2003-02-05  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/Makefile.am:
	* embed/ephy-embed-event.h:
	* embed/ephy-embed-shell.c: (ephy_embed_shell_init),
	(ephy_embed_shell_finalize), (ephy_embed_shell_new),
	(ephy_embed_shell_get_embed_single), (impl_get_downloader_view):
	* embed/ephy-embed-shell.h:
	* embed/ephy-embed-utils.c: (ephy_embed_utils_save),
	(ephy_embed_utils_build_charsets_submenu):
	* embed/ephy-embed.c: (ephy_embed_new):
	* embed/ephy-embed.h:
	* embed/mozilla/ContentHandler.h:
	* embed/mozilla/EventContext.cpp:
	* embed/mozilla/GlobalHistory.cpp:
	* embed/mozilla/Makefile.am:
	* embed/mozilla/MozRegisterComponents.cpp:
	* embed/mozilla/PromptService.cpp:
	* embed/mozilla/mozilla-notifiers.cpp:
	* embed/mozilla/mozilla-notifiers.h:
	* embed/mozilla/mozilla-prefs.cpp:
	* embed/mozilla/mozilla-prefs.h:
	* src/appearance-prefs.c: (setup_font_menu):
	* src/ephy-encoding-menu.c: (ephy_encoding_menu_rebuild):
	* src/ephy-nautilus-view.c: (ephy_nautilus_view_instance_init):
	* src/ephy-shell.c: (ephy_shell_get_type), (ephy_shell_init):
	* src/ephy-tab.c: (ephy_tab_init):
	* src/general-prefs.c: (default_charset_menu_changed_cb),
	(create_default_charset_menu):
	* src/pdm-dialog.c: (pdm_dialog_cookie_remove),
	(pdm_dialog_password_remove), (pdm_dialog_cookies_free),
	(pdm_dialog_passwords_free), (pdm_dialog_init):
	* src/prefs-dialog.c: (prefs_clear_memory_cache_button_clicked_cb),
	(prefs_clear_disk_cache_button_clicked_cb):
	* src/window-commands.c: (window_cmd_file_open):

	Split mozilla related calls out of EmbedShell.
	Load default mozilla prefs from a .js file.
	Disable stupid useless security dialogs.
	Fix chechbox alert to have Ok as default action.

2003-02-04  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/epiphany.desktop.in:
	* src/ephy-window.c:

	Fix back/forward accels.
	Add startup feedback.

2003-02-04  Xan Lopez  <xan@masilla.org>

	* src/bookmarks/ephy-bookmarks-editor.c:
	Set a sane title to the editor window.
	
2003-02-04  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/mozilla/StartHereProtocolHandler.cpp:
	* lib/ephy-start-here.c: (ephy_start_here_get_page):

	Dont crash when going to a not existent page.

2003-02-04  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-editable-toolbar.c: (item_node_new),
	(connect_drag_sources), (disconnect_drag_sources),
	(setup_toolbars), (do_merge), (ephy_editable_toolbar_init),
	(editor_close_cb), (ephy_editable_toolbar_edit):
	* src/ephy-favicon-action.c: (connect_proxy):
	* src/ephy-window.c:
	
	Fix several menu accels I borked when porting to egg.
	Connect drag source on toolbar buttons only when necessary,
	fix favicon drag.

2003-02-04  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/starthere/index.xml.in:
	
	Change xml to have translations merged properly.
	Maybe this should be fixed in intltool though.

2003-02-02  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/ephy-stock-icons.c: Add some icons, thanks
	to jorn to provide them.
	* embed/EphyWrapper.cpp: last api change seem to have
	been reverted ?!

2003-02-02  German Poo-Caaman~o  <gpoo@ubiobio.cl>

	* configure.in: Added es (Spanish) to ALL_LINGUAS.

2003-01-31  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/ephy-types.h:
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_init):
	* src/ephy-favorites-menu.c: (ephy_favorites_menu_clean),
	(ephy_favorites_menu_rebuild):

	Make favorites really work and avoid they crash when
	closing window, 0.5 is nearer now :)

2003-01-31  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/art/epiphany-bookmarks.png: better icon,
	thanks to jeroen

2003-01-31  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-editable-toolbar.c: Add icons,
	fix some minor appeareance stuff, rework ui updating
	to deal with editor size.

2003-01-30  Daniel Yacob  <locales@geez.org>

	* configure.in: Added am (Amharic) to ALL_LINGUAS.

2003-01-30  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/ui/epiphany-toolbar.xml.in:
	* embed/mozilla/EphyWrapper.cpp:
	* embed/mozilla/Makefile.am:
	* lib/egg/egg-action.c: (disconnect_proxy):
	* lib/egg/egg-menu-merge.c: (update_node):
	* lib/ephy-dnd.c: (ephy_dnd_uri_list_extract_uris):
	* lib/ephy-dnd.h:
	* lib/ephy-string.c: (ephy_str_to_int):
	* lib/widgets/ephy-editable-toolbar.c: (item_node_new),
	(impl_get_action), (add_action), (parse_item_list),
	(toolbar_list_to_xml), (ephy_editable_toolbar_save), (do_merge),
	(free_node), (ephy_editable_toolbar_finalize):
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_get_bookmark_id):
	* src/bookmarks/ephy-new-bookmark.c: (ephy_new_bookmark_add),
	(ephy_new_bookmark_response_cb), (ephy_new_bookmark_init),
	(ephy_new_bookmark_set_icon), (ephy_new_bookmark_get_id):
	* src/bookmarks/ephy-new-bookmark.h:
	* src/popup-commands.c: (popup_cmd_add_link_bookmark):
	* src/toolbar.c: (get_bookmark_action), (toolbar_get_action):
	* src/window-commands.c: (window_cmd_file_add_bookmark):

	Allow to drag also normal urls in the toolbars.
	Commit some fixes I did to the eggmenu stuff, now
	toolbar editor should work well, please start
	reporting bugs :)

2003-01-30  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/ephy-dnd.c: (ephy_dnd_url_drag_source_set),
	(ephy_dnd_enable_model_drag_source):
	* lib/ephy-dnd.h:
	* lib/widgets/ephy-editable-toolbar.c: (item_node_new),
	(add_action), (parse_item_list), (toolbar_list_to_xml),
	(drag_data_received_cb), (setup_toolbar_drag):
	* src/toolbar.c: (toolbar_get_action):

	Fix bookmarks/smart bookmarks add to the toolbars.

2003-01-29  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/ephy-bonobo-extensions.c: (ephy_bonobo_clear_path),
	(ephy_bonobo_replace_path):
	* lib/ephy-bonobo-extensions.h:
	* lib/ephy-marshal.list:
	* lib/ephy-string.c: (ephy_str_to_int):
	* lib/ephy-string.h:
	* lib/widgets/ephy-editable-toolbar.c: (impl_get_action),
	(add_action), (parse_item_list), (add_toolbar), (parse_toolbars),
	(load_defaults), (load_toolbar), (drag_data_received_cb),
	(setup_toolbar_drag), (ensure_toolbars_min_size), (do_merge),
	(ephy_editable_toolbar_class_init), (editor_get_dimensions),
	(hide_editor), (editor_close_cb), (editor_add_toolbar_cb),
	(editor_drag_data_received_cb), (editor_drag_data_delete_cb),
	(setup_editor), (button_press_cb), (show_editor),
	(ephy_editable_toolbar_edit), (ephy_editable_toolbar_get_action):
	* lib/widgets/ephy-editable-toolbar.h:
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_get_bookmark_id):
	* src/bookmarks/ephy-bookmarks.h:
	* src/session.c: (session_load):
	* src/toolbar.c: (go_location_cb), (toolbar_get_action),
	(toolbar_class_init), (toolbar_init):

	Complete (or nearly) toolbar editor implementation.
	Bookmarks are implemented too, but some minor problems
	are stopping them to work.

2003-01-29  Christian Neumair  <chris@gnome-de.org>

	* src/window-commands.c: Changed Copyright notice.

2003-01-28  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-editable-toolbar.c: (toolbar_node_new),
	(item_node_new), (find_node_from_action), (add_action),
	(parse_item_list), (parse_toolbars), (load_defaults),
	(load_toolbar), (toolbar_list_to_xml), (toolbar_list_to_string),
	(ui_update), (queue_ui_update), (drag_data_received_cb),
	(drag_data_delete_cb), (drag_data_get_cb), (setup_toolbar_drag),
	(do_merge), (ephy_editable_toolbar_set_merge),
	(ephy_editable_toolbar_init), (build_to_drag_actions_list),
	(setup_editor), (button_press_cb), (show_editor),
	(set_all_actions_sensitive), (ephy_editable_toolbar_edit):
	* src/ephy-window.c: (add_widget):
	
	Reimplement data using GNode, cleaner.
	Give up on "autoapply" for now, gtk dnd doesnt really
	like it :(.
	Implement reordering.

2003-01-27  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/ephy-embed.c: (ephy_embed_base_init):

	dont leak signals, ported from galeon

2003-01-27  Marco Pesenti Gritti  <marco@it.gnome.org>

	* configure.in:
	* data/ui/epiphany-toolbar.xml.in:
	* lib/widgets/ephy-editable-toolbar.c: (copy_toolbars),
	(is_action_in_toolbars), (is_separator),
	(find_toolbar_from_widget), (add_action_to_list),
	(parse_item_list), (toolbar_list_to_xml), (toolbar_list_to_string),
	(drag_data_received_cb), (drag_motion_cb), (drag_drop_cb),
	(setup_toolbar_drag), (do_merge),
	(ephy_editable_toolbar_set_merge), (ephy_editable_toolbar_init),
	(ephy_editable_toolbar_finalize), (drag_data_get_cb),
	(build_to_drag_actions_list), (setup_editor),
	(set_all_actions_sensitive), (ephy_editable_toolbar_edit):
	* src/ephy-favicon-action.c: (create_tool_item),
	(ephy_favicon_action_class_init):
	* src/ephy-location-action.c: (create_tool_item),
	(ephy_location_action_class_init):
	* src/ephy-spinner-action.c: (create_tool_item),
	(ephy_spinner_action_class_init):

	Implement dragging from the editor. It's stilly buggy
	but I didnt expect to get that working so soon :)

2003-01-26  Marco Pesenti Gritti  <marco@it.gnome.org>

	* configure.in:
	* lib/egg/egg-menu-merge.c: (egg_menu_merge_get_widget):
	* lib/widgets/ephy-editable-toolbar.c: (drag_data_received_cb),
	(drag_motion_cb), (setup_toolbar_drag), (do_merge),
	(ephy_editable_toolbar_init), (ephy_editable_toolbar_new),
	(editor_get_dimensions), (drag_data_get_cb), (setup_editor),
	(show_editor), (ephy_editable_toolbar_edit):
	* lib/widgets/ephy-editable-toolbar.h:
	* src/ephy-window.c: (add_widget):
	* src/toolbar.c: (toolbar_setup_actions):
	* src/window-commands.c: (window_cmd_edit_toolbar):

	Some work on tbe

2003-01-25  Marco Pesenti Gritti  <marco@it.gnome.org>

	* configure.in:
	* src/bookmarks/ephy-bookmark-action.c: (create_tool_item),
	(ephy_bookmark_action_sync_icon),
	(ephy_bookmark_action_sync_label), (entry_activated_cb),
	(button_clicked_cb), (connect_proxy),
	(ephy_bookmark_action_set_property),
	(ephy_bookmark_action_finalize), (ephy_bookmark_action_class_init),
	(ephy_bookmark_action_init), (ephy_bookmark_action_new):
	* src/bookmarks/ephy-bookmark-action.h:
	* src/ephy-favicon-action.c: (ephy_favicon_action_sync_icon):

	Complete bookmark action implementation (with smb too)

2003-01-24  Marco Pesenti Gritti  <marco@it.gnome.org>

	* NEWS:
	* configure.in:
	* data/ui/epiphany-toolbar.xml.in:
	* lib/egg/Makefile.am:
	* lib/widgets/Makefile.am:
	* lib/widgets/ephy-editable-toolbar.c:
	(ephy_editable_toolbar_get_type), (find_action),
	(add_action_to_list), (parse_item_list), (parse_toolbars),
	(load_defaults), (load_toolbar), (toolbar_list_to_xml),
	(toolbar_list_to_string), (do_merge),
	(ephy_editable_toolbar_set_merge),
	(ephy_editable_toolbar_set_property),
	(ephy_editable_toolbar_get_property),
	(ephy_editable_toolbar_class_init), (ephy_editable_toolbar_init),
	(ephy_editable_toolbar_save), (ephy_editable_toolbar_finalize),
	(ephy_editable_toolbar_new):
	* lib/widgets/ephy-editable-toolbar.h:
	* src/Makefile.am:
	* src/bookmarks/Makefile.am:
	* src/bookmarks/ephy-bookmark-action.c:
	(ephy_bookmark_action_get_type), (create_tool_item),
	(ephy_bookmark_action_sync_label), (connect_proxy),
	(ephy_bookmark_action_set_property),
	(ephy_bookmark_action_get_property),
	(ephy_bookmark_action_class_init), (ephy_bookmark_action_init),
	(ephy_bookmark_action_new):
	* src/bookmarks/ephy-bookmark-action.h:
	* src/ephy-tab.c: (ephy_tab_finalize), (ephy_tab_set_location):
	* src/toolbar.c: (toolbar_get_type), (toolbar_set_window),
	(editable_toolbar_request_action), (toolbar_init),
	(toolbar_finalize):
	* src/toolbar.h:

	Implement the data part of the toolbar editor.
	Partial implementation of Bookmark action.
	Try to fix crashes when switching tabs.

2003-01-23  Marco Pesenti Gritti  <marco@it.gnome.org>

	* TODO:
	* lib/ephy-node.c: (id_factory_set_to):

	Fix evil bug in id factory.

2003-01-23  Marco Pesenti Gritti  <marco@it.gnome.org>

	* TODO:
	* data/ui/epiphany-ui.xml.in:
	* embed/ephy-embed-utils.c:
	(ephy_embed_utils_build_charsets_submenu):
	* lib/egg/egg-menu-merge.c: (egg_menu_merge_finalize),
	(egg_menu_merge_class_init), (egg_menu_merge_init),
	(egg_menu_merge_node_prepend_uierence),
	(egg_menu_merge_node_remove_uierence), (start_element_handler),
	(cleanup), (remove_ui), (update_node):
	* src/Makefile.am:
	* src/ephy-encoding-menu.c: (ephy_encoding_menu_class_init),
	(ephy_encoding_menu_init), (ephy_encoding_menu_finalize_impl),
	(ephy_encoding_menu_set_property),
	(ephy_encoding_menu_get_property), (ephy_encoding_menu_new),
	(ephy_encoding_menu_verb_cb), (build_group), (build_charset),
	(ephy_encoding_menu_rebuild):
	* src/ephy-encoding-menu.h:
	* src/ephy-favorites-menu.c: (ephy_favorites_menu_finalize_impl),
	(ephy_favorites_menu_verb_cb):
	* src/ephy-favorites-menu.h:
	* src/ephy-window.c: (ephy_window_init), (ephy_window_finalize):
	* src/ppview-toolbar.c: (ppview_toolbar_finalize):

	Reimplement encoding menus.
	Work around eggmenu finalization problems.
	Fix ppvtoolbar/favorites menu to correctly
	remove action group on finalize.

2003-01-23  Marco Pesenti Gritti  <marco@it.gnome.org>

	* TODO:
	* lib/ephy-autocompletion.c: (ephy_autocompletion_reset),
	(ephy_autocompletion_set_key),
	(ephy_autocompletion_update_matches_full):
	* lib/widgets/ephy-location-entry.c:
	(get_editable_number_of_chars), (position_is_at_end),
	(ephy_location_entry_key_press_event_cb):
	* src/ephy-favicon-action.c: (ephy_favicon_action_finalize):
	* src/ephy-favorites-menu.c: (ephy_favorites_menu_finalize_impl),
	(ephy_favorites_menu_rebuild):
	* src/ephy-window.c: (add_widget), (setup_window),
	(ephy_window_finalize), (ephy_window_set_chrome):
	* src/ppview-toolbar.c: (toolbar_update_sensitivity),
	(ppview_toolbar_set_window), (toolbar_cmd_ppv_close):
	* src/toolbar.c: (toolbar_setup_widgets), (toolbar_finalize):

	Fix autocompletion to not show duped entries.
	Complete print preview impl.
	Fix actions referencing, a bug in egg still blocking it though.

2003-01-21  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/ephy-history.c: (ephy_history_host_set_title):

	Dont crash when url is NULL

2003-01-21  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/ui/epiphany-ui.xml.in:
	* lib/egg/egg-menu-merge.c: (do_updates):
	* src/ephy-spinner-action.c: (create_tool_item):
	* src/ephy-window.c: (add_widget), (ephy_window_init),
	(ephy_window_finalize), (update_layout_toggles),
	(ephy_window_set_chrome):
	* src/toolbar.c: (toolbar_set_window), (toolbar_new):
	* src/toolbar.h:
	* src/window-commands.c: (window_cmd_view_toolbar),
	(window_cmd_view_statusbar), (window_cmd_view_fullscreen):
	* src/window-commands.h:

	Fix chromes

2003-01-21  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/Makefile.am:
	* lib/ephy-filesystem-autocompletion.c:
	* lib/ephy-filesystem-autocompletion.h:

	Remove fs autocompletion, we are a browser after all

2003-01-21  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/mozilla/BaseProtocolContentHandler.cpp:
	* embed/mozilla/StartHereProtocolHandler.cpp:

	Api changes.

	* embed/ephy-embed-shell.c: (ephy_embed_shell_finalize):
	* embed/ephy-favicon-cache.c: (ephy_favicon_cache_finalize):
	* embed/ephy-history.c: (ephy_history_host_visited),
	(ephy_history_set_page_title), (ephy_history_remove):
	* lib/widgets/ephy-spinner.c: (ephy_spinner_expose),
	(ephy_spinner_size_request):
	* lib/widgets/ephy-spinner.h:
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_finalize):
	* src/ephy-shell.c: (ephy_shell_finalize),
	(ephy_shell_get_autocompletion):
	* src/ephy-spinner-action.c: (create_tool_item):

	Nicer spinner size. Fix references problem
	and a lot of logs to make it easy to debug it.

2003-01-20  Marco Pesenti Gritti  <marco@it.gnome.org>

	* src/ephy-window.c: (update_nav_control):

	Set stop button sensitivity

2003-01-20  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/ephy-embed-event.c: (ephy_embed_event_finalize):

	Fix a stupid mistake porting galeon changes, no more
	freeze.

	* src/ephy-favicon-action.c: (ephy_favicon_action_sync_icon),
	(ephy_favicon_action_class_init), (ephy_favicon_action_init),
	(ephy_favicon_action_finalize):

	Ref favicon cache.

	* src/ephy-window.c: (ephy_window_init):

	Initialize ppview pointer.

2003-01-20  Marco Pesenti Gritti  <marco@it.gnome.org>

	* Merge eog-menu-api branch

2003-01-20  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/ephy-embed-event.c: (free_g_value),
	(ephy_embed_event_init), (ephy_embed_event_get_property):
	* embed/ephy-embed-event.h:
	* embed/ephy-embed-popup.c: (setup_document_menu),
	(embed_popup_copy_email_cmd), (embed_popup_copy_link_location_cmd),
	(save_property_url), (embed_popup_open_link_cmd),
	(embed_popup_set_image_as_background_cmd),
	(embed_popup_copy_image_location_cmd),
	(embed_popup_open_image_cmd):
	* embed/ephy-embed-utils.c: (build_charset),
	(ephy_embed_utils_build_charsets_submenu):
	* embed/mozilla/FilePicker.cpp:
	* src/bookmarks/ephy-bookmarks.c: (update_favorites_menus):
	* src/ephy-nautilus-view.c: (gnv_embed_dom_mouse_down_cb),
	(gnv_popup_cmd_new_window), (gnv_popup_cmd_image_in_new_window):
	* src/ephy-shell.c: (ephy_shell_get_active_window):
	* src/ephy-tab.c: (ephy_tab_dom_mouse_down_cb):
	* src/ephy-window.c: (update_window_visibility),
	(update_spinner_control):
	* src/general-prefs.c: (language_dialog_changed_cb):
	* src/popup-commands.c: (popup_cmd_new_window),
	(popup_cmd_new_tab), (popup_cmd_image_in_new_tab),
	(popup_cmd_image_in_new_window), (popup_cmd_add_bookmark):
	* src/session.c: (session_close), (session_save):
	* src/session.h:

	Port several leaks fixes from galeon.

2003-01-17  Lee Willis <lwillis@plus.net>

	* embed/ephy-history.c: Don't leak history xml every 5 minutes

2003-01-16  Rob Clews <rjc@intercellsolutions.com>

	* embed/downloader-view.c: fix incorrect figures on small files

2003-01-16  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/mozilla/FilePicker.cpp: Api change

2003-01-20  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/ui/epiphany-ui.xml.in:
	* src/ephy-spinner-action.c: (create_tool_item):
	* src/ephy-tab.c: (ephy_tab_init), (ephy_tab_finalize),
	(ephy_tab_get_event), (ephy_tab_set_event),
	(ephy_tab_show_embed_popup), (ephy_tab_dom_mouse_down_cb):
	* src/ephy-tab.h:
	* src/ephy-window.c: (setup_window), (ephy_window_init),
	(ephy_window_finalize), (ephy_window_get_active_embed):
	* src/ephy-window.h:
	* src/popup-commands.c: (get_event_info),
	(popup_cmd_link_in_new_window), (popup_cmd_link_in_new_tab),
	(popup_cmd_image_in_new_tab), (popup_cmd_image_in_new_window),
	(popup_cmd_add_link_bookmark), (popup_cmd_frame_in_new_tab),
	(popup_cmd_frame_in_new_window), (popup_cmd_copy_to_clipboard),
	(popup_cmd_copy_page_location), (popup_cmd_copy_email),
	(popup_cmd_copy_link_location), (save_property_url),
	(popup_cmd_open_link), (popup_cmd_download_link),
	(popup_cmd_save_image_as), (background_download_completed),
	(popup_cmd_set_image_as_background),
	(popup_cmd_copy_image_location), (popup_cmd_save_background_as),
	(popup_cmd_open_frame), (popup_cmd_open_image):
	* src/popup-commands.h:

	Implement context menus

2003-01-19  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-spinner.c: (ephy_spinner_expose):
	* src/ephy-favicon-action.c: (create_tool_item),
	(each_url_get_data_binder), (favicon_drag_data_get_cb),
	(ephy_favicon_action_sync_icon), (connect_proxy),
	(ephy_favicon_action_set_property),
	(ephy_favicon_action_get_property),
	(ephy_favicon_action_class_init), (ephy_favicon_action_init):
	* src/ephy-favicon-action.h:
	* src/ephy-location-action.c: (ephy_location_action_get_widget):
	* src/ephy-location-action.h:
	* src/ephy-navigation-action.c:
	* src/ephy-spinner-action.c: (ephy_spinner_action_sync_throbbing),
	(create_tool_item), (connect_proxy),
	(ephy_spinner_action_set_property),
	(ephy_spinner_action_get_property),
	(ephy_spinner_action_class_init), (ephy_spinner_action_init):
	* src/ephy-spinner-action.h:
	* src/ephy-window.c: (setup_window), (update_nav_control):
	* src/toolbar.c: (toolbar_setup_actions),
	(toolbar_activate_location), (toolbar_spinner_start),
	(toolbar_spinner_stop), (toolbar_set_location),
	(toolbar_update_favicon), (toolbar_get_location),
	(toolbar_update_navigation_actions):
	* src/toolbar.h:

	Complete toolbar implementation.

2003-01-18  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/ephy-gui.c: (ephy_gui_menu_position_under_widget):
	* lib/widgets/ephy-arrow-toolbutton.c: (popup_menu_under_arrow):
	* src/ephy-location-action.c: (create_tool_item),
	(location_url_activate_cb), (connect_proxy),
	(ephy_location_action_class_init):
	* src/ephy-location-action.h:
	* src/ephy-shell.c: (ephy_shell_get_autocompletion):
	* src/ephy-spinner-action.c: (create_tool_item):
	* src/toolbar.c: (toolbar_setup_widgets), (go_location_cb),
	(toolbar_setup_actions):
	
	Make location and navigation buttons works correctly.

2003-01-18  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/ui/Makefile.am:
	* lib/widgets/Makefile.am:
	* lib/widgets/ephy-arrow-toolbutton.c:
	(ephy_arrow_toolbutton_get_type),
	(ephy_arrow_toolbutton_class_init), (button_state_changed_cb),
	(popup_menu_under_arrow), (menu_deactivated_cb),
	(arrow_button_press_event_cb), (arrow_key_press_event_cb),
	(ephy_arrow_toolbutton_init), (ephy_arrow_toolbutton_finalize),
	(ephy_arrow_toolbutton_get_menu):
	* lib/widgets/ephy-arrow-toolbutton.h:
	* src/Makefile.am:
	* src/ephy-navigation-action.c: (ephy_navigation_action_get_type),
	(new_history_menu_item), (activate_back_or_forward_menu_item_cb),
	(activate_up_menu_item_cb), (setup_back_or_forward_menu),
	(setup_up_menu), (menu_activated_cb), (connect_proxy),
	(ephy_navigation_action_set_property),
	(ephy_navigation_action_get_property),
	(ephy_navigation_action_class_init), (ephy_navigation_action_init):
	* src/ephy-navigation-action.h:
	* src/ephy-window.c: (ephy_window_init):
	* src/toolbar.c: (toolbar_setup_actions), (toolbar_set_window),
	(toolbar_init):

	Implement back/forward

2003-01-17  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/ui/Makefile.am:
	* data/ui/epiphany-ui.xml.in:
	* src/Makefile.am:
	* src/ephy-window.c: (add_widget), (setup_window),
	(ephy_window_init), (ephy_window_set_chrome):
	* src/toolbar.c: (toolbar_setup_widgets), (add_widget),
	(toolbar_set_window), (toolbar_setup_actions), (toolbar_init),
	(toolbar_finalize), (toolbar_set_visibility):

	Make some toolbar widgets work again

2003-01-16  Marco Pesenti Gritti  <marco@it.gnome.org>

	* configure.in:
	* data/ui/Makefile.am:
	* data/ui/epiphany-ui.xml.in:
	* embed/mozilla/GlobalHistory.cpp:
	* lib/Makefile.am:
	* src/Makefile.am:
	* src/ephy-favorites-menu.c: (ephy_favorites_menu_init),
	(ephy_favorites_menu_clean), (ephy_favorites_menu_finalize_impl),
	(ephy_favorites_menu_set_property), (ephy_favorites_menu_rebuild):
	* src/ephy-favorites-menu.h:
	* src/ephy-nautilus-view.c: (gnv_bonobo_control_activate_cb),
	(gnv_popup_cmd_frame_in_new_window):
	* src/ephy-window.c: (add_widget), (setup_window),
	(setup_popup_factory), (ephy_window_init), (ephy_window_finalize),
	(ephy_window_set_chrome), (ephy_window_activate_location),
	(update_status_message), (update_progress), (update_security),
	(update_nav_control), (update_location_control),
	(update_favicon_control), (update_spinner_control),
	(save_old_embed_status), (ephy_window_get_toolbar):
	* src/ppview-toolbar.c: (ppview_toolbar_set_window),
	(ppview_toolbar_init), (ppview_toolbar_finalize),
	(toolbar_update_sensitivity), (toolbar_cmd_ppv_goto_first),
	(toolbar_cmd_ppv_goto_last), (toolbar_cmd_ppv_go_back),
	(toolbar_cmd_ppv_go_forward), (toolbar_cmd_ppv_close):
	* src/ppview-toolbar.h:
	* src/statusbar.c: (statusbar_get_type), (statusbar_class_init),
	(create_statusbar_security_icon), (create_statusbar_progress),
	(statusbar_init), (statusbar_new), (statusbar_set_message):
	* src/statusbar.h:
	* src/toolbar.c: (toolbar_get_type), (toolbar_class_init),
	(toolbar_setup_favicon), (toolbar_setup_location_entry),
	(toolbar_set_window), (toolbar_init), (toolbar_finalize),
	(toolbar_set_visibility), (toolbar_button_set_sensitive),
	(toolbar_get_location):
	* src/toolbar.h:
	* src/window-commands.c:
	* src/window-commands.h:

	More menu work ...

2003-01-14  Marco Pesenti Gritti  <marco@it.gnome.org>
	
	* src/ephy-window.c:
	* src/ephy-window.h:
	* src/window-commands.c:
	* src/window-commands.h:

	Some work on the new menu stuff

2003-01-13  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/mozilla/FilePicker.cpp:
	* src/general-prefs.c: (create_default_charset_menu):

	Dont crash when schemas installed incorrectly

2003-01-13  Alex Duggan  <aldug@gnome.org>
	
	* configure.in:
	* embed/mozilla/ExternalProtocolService.cpp:
	* embed/mozilla/ExternalProtocolService.h:
	* embed/mozilla/FilePicker.h:
	* embed/mozilla/FtpProtocolHandler.h:
	* embed/mozilla/IRCProtocolHandler.h:
	* embed/mozilla/MailtoProtocolHandler.h:
	* embed/mozilla/PrintingPromptService.h:
	* embed/mozilla/PromptService.cpp:
	* embed/mozilla/PromptService.h:
	* embed/mozilla/StartHereProtocolHandler.h:
	* idl/EphyAutomation.idl:
	
	s/Galeon/Epiphany/
	
2003-01-13  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/ephy-history.c: (ephy_history_save), (hosts_added_cb),
	(hosts_removed_cb), (ephy_history_finalize),
	(ephy_history_host_set_title), (ephy_history_host_visited),
	(ephy_history_add_host), (ephy_history_visited),
	(ephy_history_add_page), (ephy_history_set_page_title):
	* src/ephy-history-model.c: (ephy_history_model_get_value):
	* src/ephy-shell.c: (ephy_shell_get_autocompletion):

	Use the title also for hosts in history.
	Cleanup hosts matching code a lot.

2003-01-13  Marco Pesenti Gritti  <marco@it.gnome.org>

	* TODO:
	* embed/ephy-favicon-cache.c: (ephy_favicon_cache_get):
	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_construct):
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_set_icon):
	* src/bookmarks/ephy-bookmarks.h:
	* src/bookmarks/ephy-new-bookmark.c: (ephy_new_bookmark_finalize),
	(ephy_new_bookmark_add), (ephy_new_bookmark_init),
	(ephy_new_bookmark_set_smarturl), (ephy_new_bookmark_set_icon):
	* src/bookmarks/ephy-new-bookmark.h:
	* src/bookmarks/ephy-node-view.c: (ephy_node_view_add_column),
	(ephy_node_view_add_icon_column):
	* src/bookmarks/ephy-node-view.h:
	* src/bookmarks/ephy-tree-model-node.c:
	(ephy_tree_model_node_get_column_type), (get_icon_pixbuf),
	(ephy_tree_model_node_get_value),
	(ephy_tree_model_node_column_get_type):
	* src/bookmarks/ephy-tree-model-node.h:
	* src/ephy-history-model.c: (ephy_history_model_get_value):
	* src/ephy-navigation-button.c: (setup_back_or_forward_menu):
	* src/ephy-tab.c: (ephy_tab_favicon_cb):
	* src/window-commands.c: (window_cmd_bookmarks_add_default):

	Use favicons in bookmarks.
	Use titles for session history when possible.

2003-01-13  Marco Pesenti Gritti  <marco@it.gnome.org>

	* src/ephy-window.c: (update_favicon_control):

	correctly update window icon when the page doesnt
	specify any favicon url.

2003-01-12  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in (ALL_LINGUAS): Added "no".

2003-01-12  Kenneth Christiansen  <kenneth@gnu.org>

	* configure.in: Added da to ALL_LINGUAS

2003-01-12  Marco Pesenti Gritti  <marco@it.gnome.org>

	* configure.in:

	0.4.2 Release. Switch configure.in to 0.5.0.

	* embed/mozilla/ContentHandler.cpp:
	* embed/mozilla/PrintingPromptService.cpp:
	* embed/mozilla/mozilla-embed.cpp:

	Remove some stupid printf.

2003-01-12  Marco Pesenti Gritti  <marco@it.gnome.org>

	* configure.in:
	* doc/debugging.txt:
	* embed/ephy-embed-utils.c:
	(ephy_embed_utils_build_charsets_submenu):
	* embed/ephy-favicon-cache.c: (ephy_favicon_cache_init):
	* embed/ephy-history.c: (ephy_history_save):
	* embed/mozilla/mozilla-embed.cpp:
	* lib/ephy-autocompletion.c: (ephy_autocompletion_reset),
	(ephy_autocompletion_get_common_prefix),
	(ephy_autocompletion_refine_matches),
	(ephy_autocompletion_update_matches_full),
	(ephy_autocompletion_sort_by_score),
	(ephy_autocompletion_data_changed_cb), (acma_grow):
	* lib/ephy-debug.c: (log_module), (ephy_debug_init),
	(ephy_profiler_new), (ephy_should_profile), (ephy_profiler_dump),
	(ephy_profiler_free), (ephy_profiler_start), (ephy_profiler_stop):
	* lib/ephy-debug.h:
	* lib/ephy-filesystem-autocompletion.c:
	(ephy_filesystem_autocompletion_finalize_impl),
	(gfa_load_directory_cb),
	(ephy_filesystem_autocompletion_set_current_dir),
	(ephy_filesystem_autocompletion_set_base_dir):
	* lib/ephy-start-here.c:
	* lib/widgets/ephy-autocompletion-window.c:
	(ephy_autocompletion_window_get_dimensions),
	(ephy_autocompletion_window_fill_store_chunk),
	(ephy_autocompletion_window_show),
	(ephy_autocompletion_window_key_press_cb):
	* lib/widgets/ephy-location-entry.c:
	(ephy_location_entry_finalize_impl),
	(ephy_location_entry_autocompletion_show_alternatives_to),
	(ephy_location_entry_autocompletion_to),
	(ephy_location_entry_activate_cb),
	(ephy_location_entry_autocompletion_sources_changed_cb),
	(ephy_location_entry_autocompletion_window_url_activated_cb),
	(ephy_location_entry_autocompletion_window_hidden_cb):
	* src/bookmarks/ephy-bookmarks-editor.c:
	* src/bookmarks/ephy-bookmarks.c:
	(ephy_bookmarks_clean_empty_keywords), (ephy_bookmarks_save),
	(ephy_bookmarks_find_keyword), (diff_keywords):
	* src/bookmarks/ephy-keywords-entry.c: (try_to_expand_keyword):
	* src/bookmarks/ephy-new-bookmark.c: (ephy_new_bookmark_set_title):
	* src/ephy-favorites-menu.c: (ephy_favorites_menu_rebuild):
	* src/ephy-nautilus-view.c: (gnv_cmd_set_charset), (if):
	* src/ephy-navigation-button.c:
	(ephy_navigation_button_finalize_impl):
	* src/ephy-shell.c: (ephy_shell_finalize):
	* src/ephy-tab.c: (ephy_tab_embed_destroy_cb), (ephy_tab_finalize):
	* src/ephy-tbi.c: (ephy_tbi_finalize_impl):
	* src/ephy-window.c: (ephy_window_finalize):
	* src/toolbar.c: (toolbar_get_widgets):

	Implement profiler helpers. Complete ephy-debug
	implementation and document it.
	Fixup all the damned DEBUG_MSG mess. toolbar/ is
	still borked since I'm not mantaining that code atm (just
	keeping it updated with galeon).

2003-01-12  Andras Timar  <timar@gnome.hu>

	* configure.in: Added de, hu and nl to ALL_LINGUAS.

2003-01-12  Marco Pesenti Gritti  <marco@it.gnome.org>

	* configure.in:
	* embed/ephy-favicon-cache.c: (ephy_favicon_cache_download):
	* embed/ephy-history.c:
	* lib/Makefile.am:
	* lib/ephy-types.h:
	* src/bookmarks/ephy-bookmarks.c:
	* src/ephy-shell.c: (ephy_shell_init):

	Move root nodes ids to ephy-types.
	Simple logging facility:
	EPHY_DEBUG_MODULES= all | filename
	will enable it.
	Need to provide a way to disable it and to get rid
	of the old per file crap.

2003-01-11  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/Makefile.am:
	* embed/ephy-embed-favicon.c:
	* embed/ephy-embed-favicon.h:
	* embed/ephy-embed-shell.c: (ephy_embed_shell_get_favicon_cache):
	* embed/ephy-favicon-cache.c: (ephy_favicon_cache_class_init),
	(ephy_favicon_cache_new), (ephy_favicon_cache_load),
	(icon_is_obsolete), (icons_added_cb), (icons_removed_cb),
	(remove_obsolete_icons), (ephy_favicon_cache_save),
	(ephy_favicon_cache_init), (kill_download),
	(cleanup_downloads_hash), (ephy_favicon_cache_finalize),
	(favicon_name_build), (favicon_download_completed_cb),
	(ephy_favicon_cache_download), (ephy_favicon_cache_get):
	* embed/ephy-favicon-cache.h:
	* embed/ephy-favicon.c:
	* embed/ephy-favicon.h:
	* embed/mozilla/mozilla-embed-shell.cpp:
	* src/ephy-tab.c: (ephy_tab_init), (ephy_tab_favicon_cb),
	(ephy_tab_location_cb), (ephy_tab_get_location),
	(ephy_tab_get_favicon_url):
	* src/ephy-tab.h:
	* src/ephy-window.c: (update_favicon_control):
	* src/toolbar.c: (toolbar_setup_favicon_ebox),
	(toolbar_update_favicon):

	Reimplement favicons. Now all exit crashes related
	to connections left open by favicons should be fixed.

2003-01-11  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/ephy-embed-persist.c: (ephy_embed_persist_cancel):
	* embed/ephy-embed-persist.h:
	* embed/mozilla/ProgressListener.cpp:
	* embed/mozilla/mozilla-embed-persist.cpp:
	* embed/mozilla/mozilla-embed-persist.h:

	Implement a cancel api. Fix refcount to really destroy
	the WebPersist object when done.

2003-01-10  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/ephy-favicon-cache.c: (ephy_favicon_cache_insert_from_url):

	Download favicon only when it's not already on disk. As side effect
	avoid most crashes on exit. Still need to really fix that.

2003-01-09  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/Makefile.am:

	Fix schemas build.

	* embed/mozilla/mozilla-embed-persist.cpp:

	Api change grrrr.

2003-01-09  Lee Willis <lwillis@plus.net>

	* embed/mozilla/FilePicker.cpp:
	
	Destroy "Invalid path dialog" correctly 

2003-01-09  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/art/Makefile.am:
	* data/epiphany.desktop.in:
	* data/ui/epiphany-ui.xml.in:
	* embed/ephy-embed-popup.c: (embed_popup_open_link_cmd):
	* src/ephy-main.c: (main):
	* src/window-commands.c: (window_cmd_set_charset):

	Rehash link context menu order to be hig compliant.
	Set a desktop icon.

2003-01-09  Marco Pesenti Gritti  <marco@it.gnome.org>

	* src/ephy-tab.c: (ephy_tab_location_cb):

	Reset link message when changing page.

2003-01-09  Marco Pesenti Gritti  <marco@it.gnome.org>

	* TODO:
	* embed/ephy-history.c: (ephy_history_init):
	* embed/mozilla/FilePicker.cpp:
	* lib/ephy-node.c: (ephy_node_new_with_id),
	(ephy_node_system_init):
	* lib/ephy-node.h:
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_init):

	Extend ephy node to allow some reversed ids.
	Use it for base bookmarks/history elements, should
	fix bookmarks lossage.
	Fix filepicker initialization.

2003-01-08  Marco Pesenti Gritti  <marco@it.gnome.org>

	* TODO:
	* data/starthere/Makefile.am:
	* data/starthere/index.xml.in:
	* data/starthere/section.xsl:
	* data/starthere/smartbookmarks.xml.in:
	* embed/ephy-embed-shell.c: (ephy_embed_shell_class_init):
	* embed/ephy-embed-shell.h:
	* embed/mozilla/StartHereProtocolHandler.cpp:
	* po/POTFILES.in:
	* src/ephy-shell.c: (ephy_shell_command_cb), (ephy_shell_init):

	More start here page work, importing bookmarks from mozilla
	now should work.

2003-01-07  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/starthere/Makefile.am:
	* data/starthere/index.xml.in:
	* data/starthere/section.css:
	* data/starthere/section.xsl:
	* embed/mozilla/StartHereProtocolHandler.cpp:
	* embed/mozilla/mozilla-embed-shell.cpp:
	* lib/ephy-file-helpers.c: (ephy_ensure_dir_exists),
	(ephy_find_file_recursive), (ephy_file_find):
	* lib/ephy-file-helpers.h:
	* lib/ephy-start-here.c: (ephy_start_here_init),
	(ephy_start_here_finalize), (is_my_lang), (mozilla_bookmarks),
	(attach_content), (build_content), (ephy_start_here_get_page),
	(ephy_start_here_get_base_uri):
	* lib/ephy-start-here.h:

	More work on the start here page.

2003-01-07  Marco Pesenti Gritti  <marco@it.gnome.org>

	* configure.in:
	* data/Makefile.am:
	* data/start_here.html:
	* data/starthere/Makefile.am:
	* data/starthere/index.xml.in:
	* data/starthere/section.xsl:
	* embed/mozilla/StartHereProtocolHandler.cpp:
	* lib/Makefile.am:
	* lib/widgets/ephy-autocompletion-window.c:
	(hack_tree_view_move_selection):
	* po/POTFILES.in:

	Architecture for translatable xml/xsl start page.

2003-01-06  Vincent Untz  <vincent@vuntz.net>

	* lib/widgets/ephy-autocompletion-window.c: declare all variables
	before the first instruction.

2003-01-06  Marco Pesenti Gritti  <marco@it.gnome.org>

	* TODO:
	* embed/mozilla/EphyWrapper.cpp:
	* embed/mozilla/EphyWrapper.h:
	* embed/mozilla/mozilla-embed.cpp:
	* src/ephy-tab.c: (ephy_tab_init), (ephy_tab_link_message_cb),
	(ephy_tab_get_status_message):

	Make sure event listener is ever attached.
	Never allow to override statusbar messages.

2003-01-05  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/art/Makefile.am:
	* data/art/epiphany.png:
	* data/epiphany.schemas.in:
	* data/glade/epiphany.glade:
	* embed/downloader-view.c: (downloader_view_init),
	(downloader_view_finalize):
	* embed/ephy-embed-favicon.c: (ephy_embed_favicon_set_property):
	* embed/ephy-embed-shell.c: (ephy_embed_shell_get_impl),
	(ephy_embed_shell_get_type), (ephy_embed_shell_new):
	* embed/ephy-embed-shell.h:
	* embed/ephy-embed-utils.c:
	(ephy_embed_utils_build_charsets_submenu):
	* embed/mozilla/mozilla-embed-persist.cpp:
	* embed/mozilla/mozilla-embed.cpp:
	* src/appearance-prefs.c: (setup_font_menu):
	* src/bookmarks/ephy-bookmarks.c: (compute_lower_fav),
	(ephy_setup_history_notifiers):
	* src/ephy-main.c: (main):
	* src/ephy-nautilus-view.c: (ephy_nautilus_view_instance_init):
	* src/ephy-shell.c: (ephy_shell_get_type), (ephy_shell_init),
	(ephy_shell_finalize), (build_homepage_url),
	(ephy_shell_get_autocompletion):
	* src/ephy-shell.h:
	* src/ephy-tab.c: (ephy_tab_init), (ephy_tab_location_cb),
	(ephy_tab_visibility_cb):
	* src/ephy-window.c: (favicon_cache_changed_cb),
	(ephy_window_init), (update_favicon_control):
	* src/general-prefs.c: (create_default_charset_menu):
	* src/history-dialog.c: (history_dialog_init):
	* src/pdm-dialog.c: (pdm_dialog_cookie_remove),
	(pdm_dialog_password_remove), (pdm_dialog_cookies_free),
	(pdm_dialog_passwords_free), (pdm_dialog_init):
	* src/prefs-dialog.c: (prefs_clear_memory_cache_button_clicked_cb),
	(prefs_clear_disk_cache_button_clicked_cb):
	* src/window-commands.c: (window_cmd_file_open):

	Make GaleonShell inherit from GaleonEmbedShell.
	Ref the shell when using the downloader.
	Use favicons for the window icon when possible.
	This required to use jimmac icon as default,
	we still dont have his permission, I'll remove it
	later if necessary.

2003-01-04  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/ephy-embed-favicon.c: (update_url), (location_changed_cb),
	(ephy_embed_favicon_set_property):
	* src/toolbar.c: (toolbar_update_favicon):

	Really update favicon when switching tab.

2003-01-04  Marco Pesenti Gritti  <marco@it.gnome.org>

	* configure.in:
	* embed/mozilla/PromptService.cpp:
	* embed/mozilla/mozilla-embed-persist.cpp:
	* lib/toolbar/ephy-tbi-zoom.c: (ephy_tbi_zoom_get_widget_impl):
	* lib/widgets/ephy-notebook.c: (tab_build_label):
	* src/bookmarks/ephy-bookmarks-editor.c: (build_editing_table),
	(build_search_box):
	* src/bookmarks/ephy-new-bookmark.c: (build_editing_table):
	* src/ephy-window.c: (ephy_window_notebook_switch_page_cb):
	* src/pdm-dialog.c: (show_cookies_properties):
	* src/session.c: (crashed_resume_dialog):

	Remove unnecessary markup from translations.

2003-01-02  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/ephy-string.c: (ephy_str_replace_substring):
	* lib/ephy-string.h:
	* lib/widgets/eggtreemultidnd.c:
	(egg_tree_multi_drag_motion_event):
	* src/bookmarks/Makefile.am:

	Use gtk icons for dnd.
	Basic implementation of bookmarks importing. Still
	not used but functional.

2003-01-01  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/Makefile.am:
	* embed/ephy-embed-favicon.c: (location_changed_cb), (favicon_cb):
	* embed/ephy-embed-popup.c: (embed_popup_copy_location_cmd),
	(embed_popup_save_page_as_cmd), (embed_popup_open_frame_cmd):
	* embed/ephy-embed-shell.c: (ephy_embed_shell_free_cookies):
	* embed/ephy-embed-shell.h:
	* embed/ephy-embed-utils.c: (ephy_embed_utils_save):
	* embed/ephy-embed.c: (ephy_embed_get_location),
	(ephy_embed_shistory_copy):
	* embed/ephy-embed.h:
	* embed/mozilla/EphyWrapper.cpp:
	* embed/mozilla/EphyWrapper.h:
	* embed/mozilla/Makefile.am:
	* embed/mozilla/mozilla-embed-shell.cpp:
	* embed/mozilla/mozilla-embed.cpp:
	* lib/Makefile.am:
	* lib/toolbar/Makefile.am:
	* lib/widgets/Makefile.am:
	* src/Makefile.am:
	* src/bookmarks/ephy-new-bookmark.c: (build_editing_table):
	* src/ephy-nautilus-view.c: (gnv_embed_location_cb),
	(gnv_popup_cmd_frame_in_new_window):
	* src/ephy-shell.c: (build_homepage_url):
	* src/ephy-tab.c: (ephy_tab_location_cb):
	* src/pdm-dialog.c: (pdm_dialog_cookie_add):
	* src/popup-commands.c: (popup_cmd_frame_in_new_tab),
	(popup_cmd_frame_in_new_window):

	Cleanup unused code.
	Reorder build.
	In new bookmark dialog enter activate ok.

2003-01-01  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/ephy-history.c: (ephy_history_clear),
	(ephy_history_remove):
	* src/bookmarks/ephy-bookmarks.c:
	(ephy_bookmarks_clean_empty_keywords):
	* src/ephy-history-model.c: (get_one_level_path_real),
	(get_path_real), (root_child_removed_cb):

	Rewrite ephy node multiple removals to actually
	work.

2003-01-01  Marco Pesenti Gritti  <marco@it.gnome.org>

	* TODO:
	* data/glade/epiphany.glade:
	* embed/ephy-history.c: (page_is_obsolete),
	(remove_obsolete_pages), (periodic_save_cb), (ephy_history_init),
	(ephy_history_finalize), (ephy_history_clear),
	(ephy_history_get_last_page), (ephy_history_remove):
	* embed/ephy-history.h:
	* lib/toolbar/ephy-tb-button.c: (button_state_changed_cb),
	(ephy_tb_button_set_show_arrow), (ephy_tb_button_set_enable_menu):
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_add):
	* src/history-dialog.c: (get_date_filter):

	Save history every 5 minutes, drop items older than 30 days,
	fix Clear. Better prelight for navigation buttons.

2002-12-31  Marco Pesenti Gritti  <marco@it.gnome.org>

	* configure.in:
	* data/.cvsignore:
	* data/Makefile.am:

	Build .in data files from the makefile,
	not from configure.in.
	Add a desktop file. We badly need an icon ;)

2002-12-31  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/toolbar/ephy-tbi-favicon.c:
	(ephy_tbi_favicon_add_to_bonobo_tb_impl):
	* lib/toolbar/ephy-tbi-spinner.c:
	(ephy_tbi_spinner_add_to_bonobo_tb_impl):
	* lib/toolbar/ephy-tbi-zoom.c:
	(ephy_tbi_zoom_add_to_bonobo_tb_impl):

	Use normal widgets instead of bonobo controls.

2002-12-31  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/mozilla/FilePicker.cpp:
	* embed/mozilla/FilePicker.h:
	* embed/mozilla/mozilla-embed-shell.cpp:

	Resync with galeon.

	* data/epiphany.schemas.in:
	* lib/ephy-bonobo-extensions.c: (ephy_bonobo_add_numbered_widget):
	* lib/ephy-bonobo-extensions.h:
	* lib/toolbar/Makefile.am:
	* lib/toolbar/ephy-tbi-std-toolitem.c:
	(ephy_tbi_std_toolitem_init),
	(ephy_tbi_std_toolitem_get_icon_impl),
	(ephy_tbi_std_toolitem_get_name_human_impl),
	(ephy_tbi_std_toolitem_to_string_impl),
	(ephy_tbi_std_toolitem_add_to_bonobo_tb_impl),
	(ephy_tbi_std_toolitem_parse_properties_impl),
	(ephy_tbi_std_toolitem_set_item):
	* lib/toolbar/ephy-tbi-std-toolitem.h:
	* lib/toolbar/ephy-toolbar-item-factory.c:
	(ephy_tb_item_factory_init),
	(ephy_toolbar_item_create_from_string),
	(ephy_toolbar_item_register_type):
	* lib/toolbar/ephy-toolbar-item-factory.h:
	* src/Makefile.am:
	* src/toolbar.c: (toolbar_class_init), (toolbar_set_property),
	(toolbar_get_widgets), (toolbar_init), (toolbar_finalize),
	(toolbar_navigation_button_set_sensitive),
	(toolbar_button_set_sensitive):
	* src/window-commands.c:

	Resync with galeon. Now we use a widget for navigation
	buttons.

2002-12-31  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/glade/prefs-dialog.glade:
	
	Remove hidden filtering page.

	* embed/ephy-history.c:
	(ephy_history_autocompletion_source_foreach), (ephy_history_init),
	(ephy_history_add_host), (ephy_history_visited),
	(ephy_history_get_page_visits):
	* lib/ephy-autocompletion.c: (ephy_autocompletion_refine_matches),
	(ephy_autocompletion_update_matches_full_item):
	* src/bookmarks/ephy-bookmarks.c:
	(ephy_bookmarks_autocompletion_source_foreach):

	Fix memory corruption in bookmarks refine.
	Implement history autocompletion score.
	Smarter host matching code.
	Add some sanity checks.

2002-12-31  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "sv" to ALL_LINGUAS.

2002-12-30  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/ephy-favicon-cache.c: (ephy_favicon_cache_dest),
	(ephy_favicon_cache_insert_from_url),
	(favicon_download_completed_cb):
	* lib/ephy-dnd.c: (ephy_dnd_enable_model_drag_source):
	* lib/ephy-dnd.h:
	* lib/widgets/eggtreemultidnd.c:
	(egg_tree_multi_drag_source_drag_data_get),
	(egg_tree_multi_drag_drag_data_get):
	* lib/widgets/eggtreemultidnd.h:
	* lib/widgets/ephy-tree-model-sort.c:
	(ephy_tree_model_sort_multi_drag_data_delete),
	(each_url_get_data_binder),
	(ephy_tree_model_sort_multi_drag_data_get):
	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_construct):
	* src/bookmarks/ephy-node-view.c:
	(ephy_node_view_enable_drag_source):
	* src/bookmarks/ephy-node-view.h:
	* src/history-dialog.c: (history_dialog_setup_view):

	Use ephy-dnd for tree model too.
	Fix favicons.

2002-12-30  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/epiphany.schemas.in:
	* lib/widgets/eggtreemodelfilter.c:
	(egg_tree_model_filter_build_level):
	* lib/widgets/ephy-autocompletion-window.c:
	(ephy_autocompletion_window_get_dimensions),
	(ephy_autocompletion_window_show), (hack_tree_view_move_selection),
	(ephy_autocompletion_window_key_press_hack),
	(ephy_autocompletion_window_key_press_cb),
	(ephy_autocompletion_window_hide):
	* src/bookmarks/ephy-bookmarks.c:
	(ephy_bookmarks_clean_empty_keywords), (bookmarks_removed_cb):
	* src/bookmarks/ephy-new-bookmark.c: (build_editing_table),
	(ephy_new_bookmark_construct):
	* src/bookmarks/ephy-node-view.c: (ephy_node_view_finalize):
	* src/history-dialog.c: (history_dialog_finalize):

	Fix some bookmarks crashes.
	Cycle between the two views in autocompletion when
	moving with keys.

2002-12-29  Marco Pesenti Gritti  <marco@it.gnome.org>

	* TODO:
	* lib/ephy-dnd.h:
	* lib/ephy-marshal.c: (ephy_marshal_VOID__POINTER_POINTER):
	* lib/ephy-marshal.h:
	* lib/ephy-marshal.list:
	* lib/widgets/Makefile.am:
	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_construct):
	* src/bookmarks/ephy-new-bookmark.c: (ephy_new_bookmark_new):
	* src/bookmarks/ephy-node-view.c:
	(ephy_node_view_row_activated_cb), (node_from_sort_iter_cb),
	(ephy_node_view_construct), (ephy_node_view_add_column),
	(get_selection), (ephy_node_view_select_node),
	(ephy_node_view_enable_drag_source):
	* src/bookmarks/ephy-node-view.h:
	* src/history-dialog.c: (add_column),
	(history_view_row_activated_cb), (node_from_sort_iter_cb),
	(history_dialog_setup_view):

	Implement column sorting / drag and drop for history
	and bookmarks.

2002-12-29  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/glade/epiphany.glade:
	* embed/ephy-history.c: (hosts_added_cb), (hosts_removed_cb),
	(ephy_history_add_host), (ephy_history_add_page),
	(ephy_history_set_page_title):
	* embed/ephy-history.h:
	* src/bookmarks/ephy-node-filter.c:
	(ephy_node_filter_expression_evaluate):
	* src/ephy-history-model.c: (get_one_level_path_real),
	(get_path_real), (ephy_history_model_get_path),
	(get_property_as_date), (ephy_history_model_get_value),
	(ephy_history_model_update_node), (root_child_removed_cb),
	(root_child_added_cb):
	* src/history-dialog.c: (history_view_row_activated_cb),
	(history_dialog_setup_view), (get_date_filter),
	(history_dialog_setup_filter), (history_dialog_init),
	(history_dialog_new_with_parent):

	Reimplement filtering, fix a few bugs. Please remove
	ephy-history.xml again, should be the last time, sorry.

2002-12-28  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/ephy-history.c: (ephy_history_add_page):
	* src/ephy-history-model.c: (get_one_level_path_real),
	(get_path_real), (ephy_history_model_get_path),
	(ephy_history_model_update_node), (root_child_removed_cb),
	(root_child_added_cb):

	Update the model correctly when the history changes.

2002-12-28  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/ephy-history.c: (ephy_history_add_host):

	Fix memory corruption. The history now should work
	better but please kill ephy-history.xml or you could
	get crashes.

2002-12-28  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/ephy-history.c: (ephy_history_init),
	(ephy_history_add_page), (ephy_history_clear),
	(ephy_history_get_hosts), (ephy_history_get_pages):
	* embed/ephy-history.h:
	* src/Makefile.am:
	* src/ephy-history-model.c: (ephy_history_model_get_type),
	(ephy_history_model_class_init), (ephy_history_model_init),
	(ephy_history_model_finalize), (filter_changed_cb),
	(ephy_history_model_set_property),
	(ephy_history_model_get_property), (ephy_history_model_new),
	(ephy_history_model_tree_model_init),
	(ephy_history_model_get_flags), (ephy_history_model_get_n_columns),
	(ephy_history_model_get_column_type),
	(ephy_history_model_get_iter), (ensure_iter), (get_parent_node),
	(get_path_real), (ephy_history_model_get_path),
	(ephy_history_model_get_host_value),
	(ephy_history_model_get_value), (ephy_history_model_iter_next),
	(ephy_history_model_iter_children),
	(ephy_history_model_iter_has_child),
	(ephy_history_model_iter_n_children),
	(ephy_history_model_iter_nth_child),
	(ephy_history_model_iter_parent),
	(ephy_history_model_node_from_iter),
	(ephy_history_model_iter_from_node),
	(ephy_history_model_update_node), (root_child_removed_cb),
	(root_child_added_cb), (root_child_changed_cb),
	(ephy_history_model_column_get_type):
	* src/ephy-history-model.h:
	* src/history-dialog.c: (add_column), (history_dialog_setup_view),
	(history_dialog_init):

	Implement an history model and use it.

2002-12-27  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/Makefile.am:
	* embed/Makefile.am:
	* embed/ephy-embed-favicon.c: (location_changed_cb),
	(ephy_embed_favicon_set_property):
	* embed/ephy-embed-shell.c: (ephy_embed_shell_init),
	(ephy_embed_shell_finalize), (ephy_embed_shell_get_favicon_cache),
	(impl_get_global_history):
	* embed/ephy-embed-shell.h:
	* embed/ephy-favicon-cache.c: (ephy_favicon_cache_set_property),
	(ephy_favicon_cache_get_property), (ephy_favicon_cache_class_init),
	(ephy_favicon_cache_init), (ephy_favicon_cache_finalize),
	(ephy_favicon_cache_new), (ephy_favicon_cache_lookup),
	(ephy_favicon_cache_lookup_direct), (ephy_favicon_cache_insert),
	(ephy_favicon_cache_dest):
	* embed/ephy-favicon-cache.h:
	* embed/ephy-favicon.c: (cache_changed_cb):
	* embed/ephy-history.c: (ephy_history_get_type),
	(ephy_history_autocompletion_source_set_basic_key),
	(ephy_history_autocompletion_source_foreach),
	(ephy_history_emit_data_changed),
	(ephy_history_autocompletion_source_init),
	(ephy_history_class_init), (ephy_history_load),
	(ephy_history_save), (hosts_added_cb), (hosts_removed_cb),
	(pages_added_cb), (pages_removed_cb), (ephy_history_init),
	(ephy_history_finalize), (ephy_history_new),
	(ephy_history_add_host), (ephy_history_visited),
	(ephy_history_get_page_visits), (ephy_history_add_page),
	(ephy_history_get_page), (ephy_history_is_page_visited),
	(ephy_history_set_page_title), (ephy_history_clear),
	(ephy_history_get_root), (ephy_history_get_last_page):
	* embed/ephy-history.h:
	* embed/global-history.c:
	* embed/global-history.h:
	* embed/mozilla/EphyWrapper.cpp:
	* embed/mozilla/GlobalHistory.cpp:
	* lib/Makefile.am:
	* lib/ephy-node.c: (ephy_node_get_type), (ephy_node_class_init),
	(int_equal), (int_hash), (ephy_node_init), (ephy_node_finalize),
	(remove_child), (ephy_node_dispose),
	(ephy_node_set_object_property), (ephy_node_get_object_property),
	(ephy_node_new), (ephy_node_get_id), (node_from_id_real),
	(ephy_node_get_from_id), (ephy_node_ref), (ephy_node_unref),
	(ephy_node_freeze), (ephy_node_thaw), (child_changed),
	(real_set_property), (ephy_node_set_property),
	(ephy_node_get_property), (ephy_node_get_property_string),
	(ephy_node_get_property_boolean), (ephy_node_get_property_long),
	(ephy_node_get_property_int), (ephy_node_get_property_double),
	(ephy_node_get_property_float), (ephy_node_get_property_node),
	(ephy_node_get_property_time), (save_parent),
	(ephy_node_save_to_xml), (ephy_node_new_from_xml),
	(real_add_child), (ephy_node_add_child), (real_remove_child),
	(ephy_node_remove_child), (ephy_node_has_child),
	(ephy_node_get_children), (ephy_node_get_n_children),
	(ephy_node_get_nth_child), (get_child_index_real),
	(ephy_node_get_child_index), (ephy_node_get_next_child),
	(ephy_node_get_previous_child), (ephy_node_system_init),
	(ephy_node_system_shutdown), (ephy_node_new_id),
	(id_factory_set_to), (write_lock_to_read_lock),
	(read_lock_to_write_lock), (lock_gdk), (unlock_gdk):
	* lib/ephy-node.h:
	* src/bookmarks/Makefile.am:
	* src/bookmarks/ephy-bookmarks.c: (get_history_item_score),
	(compute_lower_fav), (add_to_favorites), (history_site_visited_cb),
	(ephy_setup_history_notifiers), (ephy_bookmarks_init),
	(ephy_bookmarks_finalize):
	* src/bookmarks/ephy-node.c:
	* src/bookmarks/ephy-node.h:
	* src/ephy-shell.c: (ephy_shell_init), (ephy_shell_finalize),
	(build_homepage_url), (ephy_shell_get_autocompletion):
	* src/ephy-shell.h:
	* src/history-dialog.c: (history_dialog_setup_view),
	(history_dialog_setup_filter), (history_dialog_init),
	(history_dialog_set_embedded), (history_dialog_finalize),
	(history_host_checkbutton_toggled_cb), (history_entry_changed_cb),
	(history_time_optionmenu_changed_cb),
	(history_clear_button_clicked_cb):

	Rewrite the history using ephy node.
	Use the history to store favicons locations.

2002-12-26  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/ephy-embed-favicon.c: (net_state_cb), (favicon_cb):

	fix some bugs

2002-12-26  Marco Pesenti Gritti  <marco@it.gnome.org>

	* TODO:
	* embed/ephy-embed-favicon.c: (net_state_cb), (favicon_cb),
	(ephy_embed_favicon_set_property),
	(ephy_embed_favicon_get_property), (ephy_embed_favicon_get_embed):
	* embed/ephy-embed.c: (ephy_embed_base_init),
	(ephy_embed_get_link_tags):
	* embed/ephy-embed.h:
	* embed/mozilla/EphyWrapper.cpp:
	* embed/mozilla/EphyWrapper.h:
	* embed/mozilla/Makefile.am:
	* embed/mozilla/mozilla-embed.cpp:

	Make favicons work :)

2002-12-26  Marco Pesenti Gritti  <marco@it.gnome.org>

	* configure.in:
	* embed/find-dialog.c: (find_dialog_go_next),
	(find_dialog_go_prev):
	* lib/ephy-autocompletion.c:
	(ephy_autocompletion_get_matches_sorted_by_score),
	(ephy_autocompletion_refine_matches),
	(ephy_autocompletion_update_matches_full),
	(ephy_autocompletion_sort_by_score):
	* lib/ephy-autocompletion.h:
	* lib/widgets/ephy-autocompletion-window.c:
	(ephy_autocompletion_window_get_dimensions),
	(ephy_autocompletion_window_fill_store_chunk),
	(ephy_autocompletion_window_show):
	* src/popup-commands.c: (popup_cmd_add_bookmark):

	Fix a regression in find dialog.
	Fix autocompletion flickering

2002-12-25  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/find-dialog.c: (find_dialog_go_next),
	(find_dialog_go_prev):
	* src/bookmarks/ephy-bookmarks.c:
	(ephy_bookmarks_autocompletion_source_foreach):

	Fix crash on find next.
	Fix crash on autocompletion.

2002-12-24  Marco Pesenti Gritti  <marco@it.gnome.org>

	* src/bookmarks/ephy-bookmarks-editor.c:
	(keyword_node_selected_cb), (ephy_bookmarks_editor_construct):

	Regression fixed.

2002-12-24  Marco Pesenti Gritti  <marco@it.gnome.org>

	* src/bookmarks/Makefile.am:
	* src/bookmarks/ephy-bookmarks-editor.c: (keywords_changed_cb),
	(keywords_removed_cb), (ephy_bookmarks_editor_construct):
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_add),
	(ephy_bookmarks_unset_keyword), (diff_keywords),
	(ephy_bookmarks_update_keywords):
	* src/bookmarks/ephy-bookmarks.h:
	* src/window-commands.c: (window_cmd_bookmarks_add_default):

	Implement a small dialog asking title/keywords when adding
	bookmarks.
	(Regression: removing a selected keyword doesnt work
	anymore, will fix)

2002-12-24  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/glade/epiphany.glade:
	* data/ui/epiphany-ui.xml.in:
	* embed/mozilla/ContentHandler.cpp:
	* embed/mozilla/FilePicker.cpp:
	* embed/mozilla/FilePicker.h:
	* lib/widgets/Makefile.am:
	* lib/widgets/ephy-sidebar.c:
	* lib/widgets/ephy-sidebar.h:
	* src/ephy-tab.c: (ephy_tab_init), (get_host_name_from_uri):
	* src/ephy-window.c: (update_layout_toggles), (setup_layout_menus),
	(ephy_window_init), (save_window_chrome),
	(translate_default_chrome), (ephy_window_set_chrome),
	(ephy_window_update_all_controls):
	* src/ephy-window.h:
	* src/session.c:

	Drop sidebar and useless bytes progress messages.

2002-12-23  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-autocompletion-window.c:
	(ephy_autocompletion_window_get_dimensions),
	(ephy_autocompletion_window_show),
	(ephy_autocompletion_window_hide):
	* src/session.c: (do_session_resume), (crashed_resume_dialog),
	(session_autoresume):

	fix autocompl bugs.
	Simpler recover dialog.

2002-12-23  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/widgets/ephy-autocompletion-window.c:
	(ephy_autocompletion_window_finalize_impl),
	(ephy_autocompletion_window_init_widgets),
	(ephy_autocompletion_window_set_autocompletion),
	(ephy_autocompletion_window_get_dimensions),
	(ephy_autocompletion_window_fill_store_chunk),
	(ephy_autocompletion_window_show),
	(ephy_autocompletion_window_event_after_cb):
	* lib/widgets/ephy-location-entry.c: (ephy_location_ignore_prefix),
	(ephy_location_entry_autocompletion_show_alternatives_to),
	(ephy_location_entry_key_press_event_cb):
	* src/bookmarks/ephy-bookmarks.c:
	(ephy_bookmarks_autocompletion_source_foreach):

	Never show an horizontal scrollbar.
	Put a limit to completions, ever show bookmarks / smart
	bookmarks matches. Order bookmarks at the bottom of
	completions.
	Ignore common used web prefixes (like www)

2002-12-22  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/ephy-autocompletion.c: (ephy_autocompletion_get_num_matches),
	(ephy_autocompletion_get_num_action_matches),
	(ephy_autocompletion_refine_matches),
	(ephy_autocompletion_update_matches_full_item), (acma_destroy),
	(acma_append):
	* lib/ephy-autocompletion.h:
	* lib/widgets/ephy-autocompletion-window.c:
	(ephy_autocompletion_window_init),
	(ephy_autocompletion_window_finalize_impl),
	(ephy_autocompletion_window_selection_changed_cb),
	(ephy_autocompletion_window_get_dimensions),
	(ephy_autocompletion_window_show),
	(ephy_autocompletion_window_key_press_hack),
	(ephy_autocompletion_window_key_press_cb),
	(ephy_autocompletion_window_event_after_cb):
	* lib/widgets/ephy-location-entry.c: (ephy_location_entry_init),
	(ephy_location_entry_content_is_text),
	(ephy_location_entry_activate_cb),
	(ephy_location_entry_autocompletion_window_url_activated_cb):
	* src/bookmarks/ephy-bookmarks.c:
	(ephy_bookmarks_autocompletion_source_foreach),
	(ephy_bookmarks_save), (ephy_bookmarks_solve_smart_url):
	* src/ephy-shell.c: (ephy_shell_get_autocompletion):
	* src/toolbar.c: (toolbar_location_url_activate_cb):

	Complete smart bookmarks "autocompletion".

2002-12-21  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/ephy-autocompletion.c: (ephy_autocompletion_refine_matches),
	(ephy_autocompletion_update_matches),
	(ephy_autocompletion_update_matches_full_item):
	* lib/ephy-autocompletion.h:
	* lib/widgets/ephy-autocompletion-window.c:
	(ephy_autocompletion_window_class_init),
	(ephy_autocompletion_window_selection_add_selected),
	(ephy_autocompletion_window_get_dimensions),
	(ephy_autocompletion_window_fill_store_chunk),
	(ephy_autocompletion_window_show),
	(ephy_autocompletion_window_key_press_hack),
	(ephy_autocompletion_window_event_after_cb):
	* lib/widgets/ephy-autocompletion-window.h:
	* lib/widgets/ephy-location-entry.c:
	(ephy_location_entry_class_init),
	(ephy_location_entry_activate_cb),
	(ephy_location_entry_set_autocompletion),
	(ephy_location_entry_autocompletion_window_url_activated_cb),
	(ephy_location_entry_list_event_after_cb):
	* lib/widgets/ephy-location-entry.h:
	* src/bookmarks/ephy-bookmarks.c: (options_skip_spaces),
	(options_find_value_end), (options_find_next_option),
	(smart_url_options_get), (get_smarturl_only),
	(ephy_bookmarks_solve_smart_url):
	* src/bookmarks/ephy-bookmarks.h:
	* src/toolbar.c: (toolbar_location_url_activate_cb),
	(toolbar_setup_location_entry):

	Hide views when empty, fix sizing to deal with
	visibility.
	Make bookmarks open correctly.
	Add some smart bookmarks solving code.

2002-12-21  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/Makefile.am:
	* data/epiphany.schemas.in:
	* embed/mozilla/Makefile.am:
	* embed/mozilla/MozRegisterComponents.cpp:
	* embed/mozilla/StartHereProtocolHandler.cpp:
	* embed/mozilla/StartHereProtocolHandler.h:
	* lib/ephy-gui.c: (shift_color_component),
	(ephy_gui_rgb_shift_color), (rgb16_to_rgb),
	(ephy_gui_gdk_color_to_rgb), (ephy_gui_gdk_rgb_to_color):
	* lib/ephy-gui.h:
	* lib/widgets/ephy-autocompletion-window.c:
	(ephy_autocompletion_window_init_widgets):
	* src/bookmarks/ephy-bookmarks.c:
	(ephy_bookmarks_autocompletion_source_foreach):
	* src/popup-commands.c: (popup_cmd_add_bookmark):

	Use a darker color for the actions part of the
	autocompletion window.
	Add a (sucky) start-here: page and use it as
	default homepage.

2002-12-20  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/global-history.c: (history_add_url_to_list),
	(global_history_get_urls_list),
	(global_history_autocompletion_source_foreach_aux),
	(global_history_autocompletion_source_foreach):
	* lib/ephy-autocompletion-source.c:
	(ephy_autocompletion_source_base_init):
	* lib/ephy-autocompletion-source.h:
	* lib/ephy-autocompletion.c:
	(ephy_autocompletion_get_common_prefix),
	(ephy_autocompletion_update_matches),
	(ephy_autocompletion_update_matches_full_item),
	(ephy_autocompletion_update_matches_full),
	(ephy_autocompletion_compare_scores_and_alpha),
	(ephy_autocompletion_sort_by_score):
	* lib/ephy-autocompletion.h:
	* lib/ephy-filesystem-autocompletion.c:
	(ephy_filesystem_autocompletion_autocompletion_source_foreach):
	* lib/widgets/ephy-autocompletion-window.c:
	(ephy_autocompletion_window_finalize_impl),
	(ephy_autocompletion_window_init_widgets),
	(ephy_autocompletion_window_selection_changed_cb),
	(ephy_autocompletion_window_selection_add_selected),
	(ephy_autocompletion_window_get_dimensions),
	(ephy_autocompletion_window_fill_store_chunk),
	(ephy_autocompletion_window_show):
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_get_type),
	(ephy_bookmarks_autocompletion_source_set_basic_key),
	(ephy_bookmarks_autocompletion_source_foreach),
	(ephy_bookmarks_emit_data_changed),
	(ephy_bookmarks_autocompletion_source_init),
	(bookmarks_removed_cb), (ephy_bookmarks_init),
	(ephy_bookmarks_add):
	* src/bookmarks/ephy-bookmarks.h:
	* src/ephy-shell.c: (ephy_shell_get_autocompletion):
	* src/window-commands.c: (window_cmd_bookmarks_add_default):

	Begin to implement smarter location entry. Now it looks
	for bookmarks/keywords and show them by title.
	Urls are showed just as urls (no more title).
	At the bottom you can select smartbookmarks in a mozilla
	like way (how do you add smb ? just edit xml for now ;)).
	It's still incomplete but prolly it's not going to be all
	the work I thought at beginning.

2002-12-20  Marco Pesenti Gritti  <marco@it.gnome.org>

	* src/bookmarks/ephy-bookmarks-editor.c: (diff_keywords),
	(update_keywords):
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_find_keyword):
	* src/bookmarks/ephy-keywords-entry.c: (try_to_expand_keyword):

	Fix several keywords bugs. Should start to get usable.

2002-12-19  Marco Pesenti Gritti  <marco@it.gnome.org>

	* src/bookmarks/ephy-bookmarks-editor.c: (build_editing_table):
	* src/bookmarks/ephy-bookmarks.c:
	(ephy_bookmarks_clean_empty_keywords), (keywords_added_cb),
	(keywords_removed_cb), (bookmarks_removed_cb),
	(ephy_bookmarks_init), (ephy_bookmarks_finalize),
	(ephy_bookmarks_find_keyword), (ephy_bookmarks_set_keyword),
	(ephy_bookmarks_unset_keyword):
	* src/bookmarks/ephy-keywords-entry.c:
	(ephy_keywords_entry_class_init), (try_to_expand_keyword),
	(entry_would_have_inserted_characters),
	(ephy_keywords_entry_key_press), (ephy_keywords_entry_init):
	* src/bookmarks/ephy-keywords-entry.h:

	Complete autocompletion implementation.
	Rewrite keywords removing code. Still bad bugs
	but getting better.

2002-12-16  Marco Pesenti Gritti  <marco@it.gnome.org>

	* configure.in:
	* src/bookmarks/Makefile.am:
	* src/bookmarks/ephy-bookmarks-editor.c: (update_keywords),
	(keywords_changed_cb), (build_editing_table):
	* src/bookmarks/ephy-bookmarks.c: (keywords_added_cb),
	(keywords_removed_cb), (partial_match_equal),
	(ephy_bookmarks_init), (ephy_bookmarks_finalize),
	(ephy_bookmarks_find_keyword), (ephy_bookmarks_set_keyword),
	(ephy_bookmarks_unset_keyword):
	* src/bookmarks/ephy-bookmarks.h:
	* src/bookmarks/ephy-node-view.c: (ephy_node_view_select_node):
	* src/bookmarks/ephy-node-view.h:
	
	Fix some keywords bugs and start working on autocompletion

2002-12-15  Marco Pesenti Gritti  <marco@it.gnome.org>

	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_construct):
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_save),
	(add_to_favorites), (history_site_visited_cb),
	(ephy_bookmarks_finalize):
	* src/ephy-favorites-menu.c: (ephy_favorites_menu_set_path),
	(ephy_favorites_menu_verb_cb), (ephy_favorites_menu_rebuild),
	(ephy_favorites_menu_update):
	* src/ephy-window.c: (ephy_window_init):

	Make favorites really work

2002-12-15  Marco Pesenti Gritti  <marco@it.gnome.org>

	* TODO:
	* embed/global-history.c: (global_history_get_item):
	* embed/global-history.h:
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_save),
	(get_history_item_score), (compute_lower_fav),
	(ephy_bookmarks_update_favorites), (add_to_favorites),
	(update_favorites_menus), (history_site_visited_cb),
	(keywords_added_cb), (keywords_removed_cb), (favorites_added_cb),
	(favorites_removed_cb), (ephy_bookmarks_init),
	(ephy_bookmarks_finalize), (ephy_bookmarks_get_keyword):

	Complete favorites implementation, still buggy.

2002-12-14  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/ui/epiphany-ui.xml.in:
	* embed/global-history.c: (global_history_class_init),
	(global_history_visited):
	* embed/global-history.h:
	* src/Makefile.am:
	* src/bookmarks/ephy-bookmarks.c: (history_site_visited_cb),
	(ephy_setup_history_notifiers), (bookmarks_added_cb),
	(bookmarks_removed_cb), (ephy_bookmarks_init),
	(ephy_bookmarks_finalize), (ephy_bookmarks_get_favorites):
	* src/bookmarks/ephy-bookmarks.h:
	* src/ephy-favorites-menu.c: (ephy_favorites_menu_class_init),
	(ephy_favorites_menu_init), (ephy_favorites_menu_finalize_impl),
	(ephy_favorites_menu_set_property),
	(ephy_favorites_menu_get_property), (ephy_favorites_menu_new),
	(ephy_favorites_menu_set_path), (ephy_favorites_menu_rebuild),
	(ephy_favorites_menu_update), (ephy_favorites_menu_verb_cb):
	* src/ephy-favorites-menu.h:
	* src/ephy-window.c: (ephy_window_init),
	(update_favorites_control), (ephy_window_update_control):
	* src/ephy-window.h:
	* src/window-recent-history-menu.c:
	* src/window-recent-history-menu.h: some work on favorites,
	still not working quite well

2002-12-14  Marco Pesenti Gritti  <marco@it.gnome.org>

	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_node_selected_cb), (diff_keywords),
	(update_keywords), (keywords_entry_changed_cb), (bookmarks_filter),
	(keyword_node_selected_cb), (build_search_box),
	(ephy_bookmarks_editor_construct):
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_save),
	(ephy_bookmarks_init), (ephy_bookmarks_set_keyword):
	* src/bookmarks/ephy-node-view.c: (ephy_node_view_set_browse_mode):
	* src/bookmarks/ephy-node-view.h: complete keyword implementation,
	still buggy

2002-12-14  Marco Pesenti Gritti  <marco@it.gnome.org>

	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_finalize), (update_keywords),
	(keywords_entry_changed_cb), (search_entry_changed_cb),
	(build_search_box), (ephy_bookmarks_editor_construct):
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_save),
	(ephy_bookmarks_init), (ephy_bookmarks_finalize),
	(ephy_bookmarks_add_keyword), (ephy_bookmarks_get_keyword),
	(ephy_bookmarks_set_keyword), (ephy_bookmarks_get_keywords):
	* src/bookmarks/ephy-bookmarks.h:
	* src/bookmarks/ephy-tree-model-node.c:
	(ephy_tree_model_node_get_column_type),
	(ephy_tree_model_node_get_value),
	(ephy_tree_model_node_column_get_type):
	* src/bookmarks/ephy-tree-model-node.h:
	* src/ephy-window.c: some work on keywords implementation,
	still not working

2002-12-13  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/glade/epiphany.glade:
	* data/glade/prefs-dialog.glade:
	* data/ui/epiphany-ui.xml.in:
	* embed/downloader-view.c: (get_selected_row),
	(download_dialog_abort_cb):
	* src/Makefile.am:
	* src/ephy-tab.c: (ephy_tab_location_cb), (ephy_tab_title_cb):
	* src/ephy-window.c: (ephy_window_init), (ephy_window_finalize),
	(ephy_window_get_toolbar):
	* src/ephy-window.h:
	* src/history-dialog.c: (each_url_get_data_binder):
	* src/language-editor.c:
	(language_editor_remove_button_clicked_cb):
	* src/pdm-dialog.c: (cookies_treeview_selection_changed_cb),
	(action_treeview_selection_changed_cb),
	(pdm_dialog_remove_button_clicked_cb), (setup_action),
	(pdm_dialog_init),
	(pdm_dialog_cookies_properties_button_clicked_cb):
	* src/window-commands.c:
	* src/window-commands.h:
	* src/window-recent-history.c:
	* src/window-recent-history.h: some menu rehashing, remove recent
	history to be replaced by favourites. Fix all tree views.

2002-12-12  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/find-dialog.c: (impl_show): grab focus on the entry

2002-12-08  Marco Pesenti Gritti  <marco@it.gnome.org>

	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_node_selected_cb), (update_prop_from_entry):

	Fix some memory corruption.

2002-12-08  Marco Pesenti Gritti  <marco@it.gnome.org>

	* TODO:
	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_node_selected_cb), (update_prop_from_entry),
	(title_entry_changed_cb), (keywords_entry_changed_cb),
	(build_editing_table), (ephy_bookmarks_editor_construct):
	* src/bookmarks/ephy-bookmarks.h:
	* src/bookmarks/ephy-node-view.c: (ephy_node_view_class_init),
	(ephy_node_view_selection_changed_cb), (ephy_node_view_construct):
	* src/bookmarks/ephy-node-view.h:

	Add ability to edit title and keywords (useless atm).

2002-12-08  Marco Pesenti Gritti  <marco@it.gnome.org>

	* Makefile.am:
	* README:
	* configure.in:
	* embed/mozilla/Makefile.am:
	* lib/Makefile.am:
	* po/.cvsignore:
	* po/POTFILES.in: 

	Make it pass distcheck.

	* src/ephy-tab.c: (ephy_tab_dom_mouse_down_cb):

	Reintroduce page load on url pasting.

2002-12-08  Marco Pesenti Gritti  <marco@it.gnome.org>

	* src/bookmarks/Makefile.am:
	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_node_activated_cb),
	(ephy_bookmarks_editor_response_cb),
	(ephy_bookmarks_editor_construct), (ephy_bookmarks_editor_new):
	* src/bookmarks/ephy-bookmarks-editor.h:
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_save),
	(ephy_bookmarks_finalize), (ephy_bookmarks_add):
	* src/bookmarks/ephy-node-view.c:
	(ephy_node_view_row_activated_cb), (ephy_node_view_construct),
	(ephy_node_view_new), (ephy_node_view_init), (get_selection),
	(ephy_node_view_get_selection), (ephy_node_view_remove):
	* src/bookmarks/ephy-node-view.h:
	* src/bookmarks/ephy-tree-model-node.c: (ephy_tree_model_node_new):
	* src/ephy-shell.c: (ephy_shell_finalize):
	* src/window-commands.c: (window_cmd_bookmarks_edit):

	You can now at least add bookmarks to a list

2002-12-07  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/mozilla/EphyWrapper.cpp:
	* embed/mozilla/EphyWrapper.h: remove some unused code,
	should build with mozilla head again

2002-12-06  Marco Pesenti Gritti  <marco@it.gnome.org>

	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_class_init),
	(ephy_bookmarks_editor_construct), (ephy_bookmarks_editor_new),
	(ephy_bookmarks_editor_set_property),
	(ephy_bookmarks_editor_get_property), (ephy_bookmarks_editor_init):
	* src/bookmarks/ephy-bookmarks.c: (ephy_bookmarks_load),
	(ephy_bookmarks_init), (ephy_bookmarks_finalize),
	(ephy_bookmarks_add), (ephy_bookmarks_get_bookmarks):
	* src/bookmarks/ephy-bookmarks.h:
	* src/window-commands.c: (window_cmd_bookmarks_edit),
	(window_cmd_bookmarks_add_default): more bookmarks work

2002-12-05  Bastien Nocera <hadess@hadess.net>

	* src/ephy-main.c: (ephy_main_start): get the Bonobo warning go away and Ephy to
	just actually work

2002-12-05  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/mozilla/FilePicker.cpp: actually parent the file picker
	* src/Makefile.am:
	* src/bookmarks/ephy-bookmarks-editor.c:
	(ephy_bookmarks_editor_class_init), (ephy_bookmarks_editor_new),
	(ephy_bookmarks_editor_construct),
	(ephy_bookmarks_editor_set_object_property),
	(ephy_bookmarks_editor_get_object_property),
	(ephy_bookmarks_editor_init):
	* src/bookmarks/ephy-bookmarks-editor.h:
	* src/bookmarks/ephy-node-view.c: (ephy_node_view_set_property),
	(ephy_node_view_construct), (ephy_node_view_add_column),
	(ephy_node_view_init):
	* src/ephy-shell.c: (ephy_shell_init), (ephy_shell_get_bookmarks):
	* src/ephy-shell.h:
	* src/window-commands.c: (window_cmd_bookmarks_edit):
	more useless bookmarks work

2002-12-01  Marco Pesenti Gritti  <marco@it.gnome.org>

	* src/bookmarks/Makefile.am:
	* src/bookmarks/eggtreemodelfilter.c:
	* src/bookmarks/eggtreemodelfilter.h:
	* src/bookmarks/ephy-bookmarks-editor.c:
	* src/bookmarks/ephy-bookmarks-editor.h:
	* src/bookmarks/ephy-node-view.c:
	* src/bookmarks/ephy-node-view.h: more bookmarks work

2002-11-30  Marco Pesenti Gritti  <marco@it.gnome.org>

	* embed/ephy-embed.h:
	* embed/find-dialog.c: (find_dialog_go_next),
	(find_dialog_go_prev), (find_next_button_clicked_cb),
	(find_prev_button_clicked_cb), (find_entry_activate_cb):
	* embed/find-dialog.h:
	* embed/mozilla/EphyWrapper.cpp:
	* embed/mozilla/EphyWrapper.h:
	* embed/mozilla/Makefile.am:
	* embed/mozilla/mozilla-embed.cpp:
	* src/bookmarks/Makefile.am:
	* src/bookmarks/ephy-bookmarks.h:
	* src/bookmarks/ephy-node-filter.c:
	* src/bookmarks/ephy-node-filter.h:
	* src/bookmarks/ephy-node.c: (ephy_node_class_init):
	* src/bookmarks/ephy-tree-model-node.c:
	* src/bookmarks/ephy-tree-model-node.h:
	* src/window-commands.c: fix dialog/typeahead find
	interaction. More infrastucture bookmarks work.

2002-11-29  Marco Pesenti Gritti  <marco@it.gnome.org>

	* lib/ephy-string.c:
	* lib/ephy-string.h: remove no more used helper
	* src/window-recent-history-menu.c:
	(ephy_window_recent_history_menu_rebuild): correctly
	encode xml strings

2002-11-28  Marco Pesenti Gritti  <marco@it.gnome.org>

	* configure.in:
	* lib/Makefile.am:
	* lib/ephy-string.c: (ephy_string_store_time_in_string),
	(ephy_string_time_to_string):
	* lib/ephy-string.h:
	* src/Makefile.am:
	* src/bookmarks/Makefile.am:
	* src/bookmarks/ephy-bookmarks.c:
	* src/bookmarks/ephy-bookmarks.h:
	* src/bookmarks/ephy-node.c:
	* src/bookmarks/ephy-node.h:
	* src/ephy-shell.c:
	* src/history-dialog.c: (history_dialog_update_host_item),
	(history_dialog_update_url_item): some configure cleanups,
	some bookmarks architecture stuff. Credits to rhythmbox
	developers.

2002-11-27  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/epiphany.schemas.in:
	* embed/ephy-embed-event.h:
	* embed/ephy-embed-persist.c: (ephy_embed_persist_new):
	* embed/ephy-embed-popup.c: (setup_element_menu),
	(setup_document_menu):
	* embed/mozilla/Makefile.am: fix favicons, remove mozilla-config.h
	and use the old hack. Damn we need a real fix for this.

2002-11-27  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/glade/toolbar-editor.glade:
	* lib/toolbar/ephy-toolbar-editor.c: (update_arrows_sensitivity),
	(ephy_tb_editor_treeview_selection_changed_cb),
	(ephy_tb_editor_setup_treeview): fix arrows sensitivity in the
	toolbar editor

2002-11-27  Marco Pesenti Gritti  <marco@it.gnome.org>

	* README: wrote
	* src/ephy-shell.c: (ephy_init_services): add the monitor on the
	right gconf dir
	* src/history-dialog.c: fix gcon paths

2002-11-27  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/art/epiphany-secure.png:
	* data/art/epiphany-unsecure.png: resize to 18x18
	* configure.in:
	* embed/Makefile.am:
	* embed/mozilla/Makefile.am:
	* src/Makefile.am:
	* lib/Makefile.am:
	* lib/toolbar/Makefile.am:
	* lib/widgets/Makefile.am: enable werror
	* lib/ephy-file-helpers.c: missing includes
	* lib/widgets/ephy-location-entry.c: disable completion_to by default
	(ephy_location_entry_key_press_event_cb):
	* src/statusbar.c: (statusbar_set_security_state): really fix it

2002-11-27  Marco Pesenti Gritti  <marco@it.gnome.org>

	* data/GNOME_Epiphany_NautilusView.server.in:
	* data/epiphany.schemas.in:
	* data/glade/epiphany.glade:
	* data/ui/epiphany-ui.xml.in:
	* data/ui/nautilus-epiphany-view.xml.in:
	* embed/global-history.c: (history_save):
	* embed/mozilla/ContentHandler.cpp:
	* lib/ephy-file-helpers.c: (ephy_ensure_dir_exists):
	* lib/ephy-file-helpers.h:
	* src/ephy-shell.c: (ephy_shell_init):
	* src/history-dialog.c: (history_dialog_set_embedded):
	* src/pdm-dialog.c: (pdm_dialog_init):
	* src/session.c: (crashed_resume_dialog):
	* src/statusbar.c: (statusbar_set_security_state):
	Fix a few typos, get rid of mime handlers list,
	reimplement security icon

2002-11-26  Marco Pesenti Gritti  <marco@it.gnome.org>

	* Checked in initial codebase.
